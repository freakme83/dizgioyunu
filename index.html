<!DOCTYPE html><html lang="tr"><head>
    <link rel="icon" type="image/png" href="/favicon.png">

    
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GVVFCT9J5D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-GVVFCT9J5D');
</script>
<link rel="apple-touch-icon" href="/apple-touch-icon-v2.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="DÄ°ZGÄ°&lt;">
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no,date=no,address=no,email=no,url=no"><title>DÄ°ZGÄ°â€¹</title>
<meta name="description" content="DÄ°ZGÄ°â€¹, sÃ¼reye karÅŸÄ± TÃ¼rkÃ§e kelime tÃ¼retme oyunu. Kolay ve Klasik modlarda en yÃ¼ksek skoru yap, zirvedekilerde yerini al.">
<link rel="canonical" href="https://dizgioyunu.com/">
<meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1">
<meta name="theme-color" content="#0b0b0f">

<meta property="og:site_name" content="DÄ°ZGÄ°â€¹">
<meta property="og:title" content="DÄ°ZGÄ°â€¹ â€“ TÃ¼rkÃ§e kelime tÃ¼retme oyunu">
<meta property="og:description" content="SÃ¼re bitmeden elinden geleni yap. Kolay ve Klasik modlarda kelime Ã¼ret, skor kas, zirvedekilere gir.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://dizgioyunu.com/">
<meta property="og:image" content="https://dizgioyunu.com/apple-touch-icon-v2.png">

<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DÄ°ZGÄ°â€¹ â€“ TÃ¼rkÃ§e kelime tÃ¼retme oyunu">
<meta name="twitter:description" content="SÃ¼re bitmeden elinden geleni yap. Kolay ve Klasik modlarda kelime Ã¼ret, skor kas, zirvedekilere gir.">
<meta name="twitter:image" content="https://dizgioyunu.com/apple-touch-icon-v2.png">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "DÄ°ZGÄ°â€¹",
  "url": "https://dizgioyunu.com/",
  "applicationCategory": "GameApplication",
  "operatingSystem": "Web",
  "inLanguage": "tr-TR",
  "description": "DÄ°ZGÄ°â€¹, sÃ¼reye karÅŸÄ± TÃ¼rkÃ§e kelime tÃ¼retme oyunu. Kolay ve Klasik modlarda en yÃ¼ksek skoru yap."
}
</script>

 <script src="https://cdn.tailwindcss.com"></script>
<script>
  // App version + one-time popup storage key (kept on window to avoid const collisions)
  window.DIZGI_VERSION = "1.03";
  window.DIZGI_SEEN_VERSION_KEY = "dizgi_seen_version_1_03_support";
  // Back-compat (some scripts may still reference these)
  window.CURRENT_VERSION = window.DIZGI_VERSION;
  window.VERSION_POPUP_STORAGE_KEY = window.DIZGI_SEEN_VERSION_KEY;
</script>
 <style>
        @import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&display=swap');

        :root{
            --ui-scale: 1;
            --symbol-h: 100; /* px */
            --reel-h: 300;   /* px */
            --font-scale: 1;
        }
        @media (max-width: 640px){
            :root{ --ui-scale: 0.86; --symbol-h: 84; --reel-h: 252; --font-scale: 0.92; }
        }
        @media (max-height: 720px){
            :root{ --ui-scale: 0.80; --symbol-h: 76; --reel-h: 228; --font-scale: 0.88; }
        }
        @media (max-height: 640px){
            :root{ --ui-scale: 0.64; --symbol-h: 70; --reel-h: 210; --font-scale: 0.84; }
        }
        html, body{
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            -webkit-text-size-adjust: 100%;

            display:flex;
            justify-content:center;
            align-items:center;
 height: 100%; overflow: hidden; overscroll-behavior: none; }

                body {
            font-family: 'Libre Baskerville', Georgia, serif;
            background-color: #020617;
            color: #f8fafc;
            overflow: hidden;
        }

        .reel-container {
            height: calc(var(--reel-h) * 1px);
            overflow: hidden;
            position: relative;
        }

        .reel {
            display: flex;
            flex-direction: column;
            transition: transform 1.2s cubic-bezier(0.45, 0.05, 0.55, 0.95);
        }

        .symbol {
            -webkit-touch-callout: none;
            -webkit-user-select: none;

            height: calc(var(--symbol-h) * 1px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: calc(3.5rem * var(--font-scale));
            font-weight: 900;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(30, 41, 59, 0.5);
        }

        
        #reel-0 .symbol {
            background: rgba(59, 130, 246, 0.1);
        }

        .symbol.active-letter {
            color: #fbbf24;
            text-shadow: 0 0 15px rgba(251, 191, 36, 0.4);
        }

        
        /* Used letter highlight (matches title color: Tailwind text-blue-400 ~ #60A5FA) */
        .used-letter{
            outline: none !important;
        }
        .touch-key.used-now{
            box-shadow: 0 0 0 2px var(--nyt-accent) inset, 0 0 10px rgba(214,200,154,0.30);
        }
.glass {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timer-low {
            color: #ef4444 !important;
            animation: pulse-red 1s infinite;
        }

        @keyframes pulse-red {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .overlay {
            background: rgba(2, 6, 23, 0.9);
            backdrop-filter: blur(12px);
        }

        input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        
        .btn-pass {
            background: linear-gradient(135deg, #f43f5e 0%, #9f1239 100%);
            box-shadow: 0 4px 15px rgba(244, 63, 94, 0.3);
        }
        
        .btn-pass:hover:not(:disabled) {
            filter: brightness(1.1);
            transform: translateY(-1px);
        }

        .btn-pass:active:not(:disabled) {
            transform: translateY(1px);
        }

        .btn-pass-free {
            background: linear-gradient(135deg, #22c55e 0%, #166534 100%);
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.25);
        }

        .btn-pass-free:hover:not(:disabled) {
            filter: brightness(1.08);
            transform: translateY(-1px);
        }

        .btn-pass-free:active:not(:disabled) {
            transform: translateY(1px);
        }

        .touch-key {
            height: 52px;
            border-radius: 1.25rem;
            font-weight: 900;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(15, 23, 42, 0.85);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .touch-key:active { transform: scale(0.98); }
        .touch-key:disabled { opacity: 0.35; }
        .touch-key small { letter-spacing: 0.08em; }

        
        :root{
            --nyt-bg: #0B0B0B;
            --nyt-tile: #111111;
            --nyt-border: #2A2A2A;
            --nyt-text: #F5F5F5;
            --nyt-muted: #9A9A9A;
            --nyt-accent: #D6C89A;
            --nyt-error: #B85C5C;
            --nyt-tile-active: #151515;
            --nyt-overlay: rgba(11,11,11,0.94);
            --nyt-panel: rgba(22,22,22,0.96);
            --nyt-panel-border: rgba(255,255,255,0.12);
            --nyt-panel-header: rgba(22,22,22,0.98);
            --nyt-panel-text: rgba(255,255,255,0.92);
            --nyt-panel-button-bg: rgba(0,0,0,0.28);
            --nyt-panel-button-border: rgba(255,255,255,0.14);
            --nyt-action-bg: rgba(255,255,255,0.08);
            --nyt-action-border: rgba(255,255,255,0.14);
        }

        body[data-theme="light"]{
            --nyt-bg: #f7f4ee;
            --nyt-tile: #e7dfd3;
            --nyt-border: #d7cec3;
            --nyt-text: #0b0b0b;
            --nyt-muted: #6b5f52;
            --nyt-accent: #8a7a5e;
            --nyt-error: #b85c5c;
            --nyt-tile-active: #e0d5c7;
            --nyt-overlay: rgba(246,243,237,0.92);
            --nyt-panel: rgba(248,244,237,0.96);
            --nyt-panel-border: rgba(0,0,0,0.08);
            --nyt-panel-header: rgba(255,255,255,0.98);
            --nyt-panel-text: rgba(11,11,11,0.9);
            --nyt-panel-button-bg: rgba(0,0,0,0.06);
            --nyt-panel-button-border: rgba(0,0,0,0.12);
            --nyt-action-bg: rgba(0,0,0,0.05);
            --nyt-action-border: rgba(0,0,0,0.12);
        }

        body{
            background: var(--nyt-bg) !important;
            color: var(--nyt-text) !important;
        }

        
        .glass{
            background: transparent !important;
            backdrop-filter: none !important;
            border: 1px solid var(--nyt-border) !important;
            box-shadow: none !important;
        }

        body[data-theme="light"] .glass{
            background: rgba(255,255,255,0.4) !important;
        }

        
        .rounded-\[3rem\]{ border-radius: 18px !important; }
        .rounded-\[2\.5rem\]{ border-radius: 18px !important; }
        .rounded-\[2rem\]{ border-radius: 14px !important; }
        .shadow-2xl, .shadow-xl, .shadow-lg, .shadow-inner, .shadow-\[0_0_30px_rgba\(37,99,235,0\.4\)\]{
            box-shadow: none !important;
        }

        
        h1{
            letter-spacing: 0.18em !important;
            font-weight: 700 !important;
            font-style: normal !important;
            color: var(--nyt-text) !important;
        }

        
        .text-slate-400, .text-slate-500, .text-slate-700{
            color: var(--nyt-muted) !important;
        }

        
        .bg-slate-950{
            background: transparent !important;
        }
        .border-slate-800{
            border-color: var(--nyt-border) !important;
        }

        
        .symbol{
            background: var(--nyt-tile) !important;
            border-bottom: 1px solid var(--nyt-border) !important;
            border-radius: 4px !important;
            font-weight: 700 !important;
            text-shadow: none !important;
            transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, background-color 160ms ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.06);
        }
        .symbol.used-letter::before{
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            box-sizing: border-box;
            border: 3px solid var(--nyt-accent);
            pointer-events: none;
        }
        #reel-0 .symbol{
            background: var(--nyt-tile) !important;
        }
        #reel-0 .symbol.active-letter{
            background: var(--nyt-tile-active) !important;
        }
        .symbol.active-letter{
            color: var(--nyt-text) !important;
            background: var(--nyt-tile-active) !important;
            box-shadow: 0 0 0 1px rgba(0,0,0,0.12), 0 6px 12px rgba(0,0,0,0.08);
            transform: scale(1.02);
        }

        .symbol:active{
            transform: scale(0.98);
        }

        @media (hover:hover) and (pointer:fine){
            .symbol:hover{
                box-shadow: 0 0 0 1px rgba(0,0,0,0.12), 0 6px 12px rgba(0,0,0,0.10);
            }
        }

        
        #word-input{
            background: transparent !important;
            border: none !important;
            border-bottom: 1px solid var(--nyt-border) !important;
            border-radius: 0 !important;
            box-shadow: none !important;
            letter-spacing: 0.22em !important;
            font-weight: 700 !important;
        }
        #word-input:focus{
            border-bottom-color: var(--nyt-accent) !important;
        }

        
        #easy-btn, #classic-btn{
            background: transparent !important;
            border: 1px solid var(--nyt-border) !important;
            color: var(--nyt-text) !important;
            box-shadow: none !important;
            border-radius: 14px !important;
        }
        #easy-btn:hover, #classic-btn:hover{ border-color: var(--nyt-accent) !important; }

        .btn-pass{
            background: transparent !important;
            border: 1px solid var(--nyt-border) !important;
            box-shadow: none !important;
        }
        .btn-pass:hover:not(:disabled){
            border-color: var(--nyt-error) !important;
            filter: none !important;
            transform: none !important;
        }
        .btn-pass span.bg-black\/20{
            background: transparent !important;
            border: 1px solid var(--nyt-border) !important;
            color: var(--nyt-muted) !important;
        }

        
        .overlay{
            background: var(--nyt-bg) !important;
            backdrop-filter: none !important;
        }

        
        .timer-low{
            color: var(--nyt-error) !important;
            animation: none !important;
        }

        
        #potential{ color: var(--nyt-accent) !important; }

        
        .text-blue-400, .text-emerald-400{
            color: var(--nyt-accent) !important;
        }
        .bg-blue-600, .bg-slate-700{
            background: transparent !important;
            border: 1px solid var(--nyt-border) !important;
        }

        
        .touch-key{
            background: var(--nyt-tile) !important;
            border-color: var(--nyt-border) !important;
            transition: transform 140ms ease, box-shadow 140ms ease, border-color 140ms ease;
        }
        .touch-key:active{
            transform: scale(0.98);
        }

    
/* --- Mobile-first native-app feel additions (release_min) --- */
html, body{
  height: 100%;
  min-height: 100dvh;
  overflow: hidden;
  overscroll-behavior: none;
  touch-action: manipulation; /* prevent double-tap zoom */
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}
@supports (height: 100dvh){
  .h-screen{height:100dvh!important;}
  .min-h-screen{min-height:100dvh!important;}
}
/* Keep everything on one screen and avoid accidental scroll bounce */
body{ position: relative; }

/* Touch targets */
button, .touch-key, [role="button"]{
  min-width: 44px;
  min-height: 44px;
  touch-action: manipulation;
}

/* Disable hover-only affordances on touch devices */
@media (hover: none){
  .btn-pass:hover:not(:disabled),
  .btn-pass-free:hover:not(:disabled),
  #easy-btn:hover, #classic-btn:hover{
    filter:none !important;
    transform:none !important;
  }
}

/* Dynamic viewport height */
body{
  min-height: 100dvh;
}

/* Mobile scaling under 640px */
@media (max-width: 639px){
  body{ padding: 12px !important; }
  /* main glass card */
  body > div.glass{
    padding: 18px !important;
    border-radius: 2rem !important;
  }
  /* headings and spacing */
  .text-5xl{ font-size: 2.25rem !important; line-height: 1.1 !important; }
  .text-4xl{ font-size: 2rem !important; line-height: 1.1 !important; }
  /* input sizing (keep >=16px to prevent iOS zoom) */
  #word-input{
    font-size: 1.5rem !important;
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  /* reduce heavy GPU effects a bit */
  .glass{
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}


/* Mobile-only action row (native-ish submit/clear) */
.mobile-only{display:none}
.btn-action{
  min-height:44px;
  touch-action:manipulation;
  background:var(--nyt-action-bg);
  border:1px solid var(--nyt-action-border);
  box-shadow:0 12px 28px rgba(0,0,0,.35);
}
.btn-action:active{transform:scale(.98)}
@media (hover:none) and (pointer:coarse){
  .mobile-only{display:flex}
}
/* End overlay fit on short mobile screens (avoid cut-off like "SÃœRE BÄ°TTÄ°!") */
@media (max-width:420px), (max-height:720px){
  #game-overlay{padding:16px}
  #overlay-title{font-size:2rem; line-height:1.05; margin-bottom:6px}
  #overlay-desc{margin-bottom:12px; font-size:.95rem}
  #easy-btn,#classic-btn,#rules-btn{padding:14px 26px; font-size:1rem}
}
/* Release Notes (v1.01) */
.rn-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;
  /* Keep the dialog inside mobile safe areas (iOS notch / home indicator) */
  padding:calc(24px + env(safe-area-inset-top)) 16px calc(24px + env(safe-area-inset-bottom)) 16px;
  background:rgba(0,0,0,.55);z-index:9999}
.rn-backdrop[aria-hidden="false"]{display:flex}
.rn-card{width:min(92vw,380px);
  /* iOS Safari: use dynamic viewport to prevent top/bottom browser chrome from covering content */
  max-height:calc(100dvh - (48px + env(safe-area-inset-top) + env(safe-area-inset-bottom)));
  display:flex;flex-direction:column;overflow:hidden;
  border-radius:18px;background:var(--nyt-panel);border:1px solid var(--nyt-panel-border);
  box-shadow:0 12px 40px rgba(0,0,0,.45);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
  padding:0}
.rn-head{display:flex;align-items:center;justify-content:space-between;gap:10px;
  position:sticky;top:0;z-index:3;
  background:var(--nyt-panel-header);
  padding:14px 14px 10px}
.rn-title{font-weight:800;letter-spacing:.5px;color:#D6C89A}
.rn-close{min-width:44px;min-height:44px;border-radius:12px;border:1px solid var(--nyt-panel-button-border);background:var(--nyt-panel-button-bg);color:var(--nyt-text);font-size:24px;line-height:1}
.rn-body{color:var(--nyt-panel-text);font-size:15px;line-height:1.35;
  display:grid;gap:4px;
  /* Critical for iOS flex + scroll: allow the body to shrink and become scrollable */
  flex:1;min-height:0;
  overflow:auto;-webkit-overflow-scrolling:touch;
  padding:0 14px 14px}
.rn-foot{flex:0 0 auto;background:var(--nyt-panel-header);
  padding:0 14px calc(14px + env(safe-area-inset-bottom))}
.rn-ok{width:100%;min-height:44px;border-radius:14px;border:1px solid var(--nyt-panel-button-border);background:var(--nyt-panel-button-bg);color:var(--nyt-text);font-weight:700}


.ff-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#000;z-index:9998}
.ff-overlay[aria-hidden="false"]{display:flex}
.ff-wrap{max-width:min(92vw,720px);padding:24px 18px;text-align:center}
.ff-text{color:#fff;font-size:1.05rem;line-height:1.45;white-space:pre-wrap}
.ff-hint{margin-top:22px;color:rgba(255,255,255,.85);font-size:.85rem;letter-spacing:.08em;text-transform:lowercase;animation:ffBlink 2.8s ease-in-out infinite}
@keyframes ffBlink{0%,100%{opacity:.35}50%{opacity:.8}}50%{opacity:1}}
@media (hover:hover) and (pointer:fine){.rn-close:hover,.rn-ok:hover{filter:brightness(1.08)}}

/* v102 input stability */
.reel-container{ touch-action: none; }
.symbol{ touch-action: manipulation; }

        /* --- UI Symmetry & Rules button (v109) --- */
        .hud{
            display:grid;
            grid-template-columns: 1fr auto 1fr;
            align-items:center;
            gap: .75rem;
        }
        .hud-left{ justify-self:center; }
        .hud-center{ justify-self:center; }
        .hud-right{ justify-self:center; }
        .hud-box{ min-width: 118px; width:118px; }
        .rules-btn{
            position:absolute;
            top: 14px;
            right: 14px;
            width: 36px;
            height: 36px;
            border-radius: 14px;
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(0,0,0,0.35);
            color: rgba(255,255,255,0.80);
            font-weight: 900;
            line-height: 1;
            display:flex;
            align-items:center;
            justify-content:center;
            z-index: 30;
        }
        .rules-btn:active{ transform: scale(0.98); }
        .theme-btn{
            position:absolute;
            top: 14px;
            left: 14px;
            width: 36px;
            height: 36px;
            border-radius: 14px;
            border: 1px solid var(--nyt-border);
            background: rgba(0,0,0,0.35);
            color: var(--nyt-text);
            font-weight: 900;
            line-height: 1;
            display:flex;
            align-items:center;
            justify-content:center;
            z-index: 30;
        }
        .theme-btn:active{ transform: scale(0.98); }

        body[data-theme="light"] .theme-btn{
            background: rgba(0,0,0,0.06);
        }

        body[data-theme="light"] .text-white{
            color: var(--nyt-text) !important;
        }
        body[data-theme="light"] .text-slate-200,
        body[data-theme="light"] .text-slate-300{
            color: var(--nyt-muted) !important;
        }

        body[data-theme="light"] .btn-pass-free{
            background: #f3eee6 !important;
            border: 1px solid var(--nyt-border) !important;
            color: var(--nyt-text) !important;
            box-shadow: none !important;
        }
        body[data-theme="light"] .btn-pass-free:hover:not(:disabled){
            background: #ede6dc !important;
            border-color: var(--nyt-accent) !important;
            transform: none !important;
            filter: none !important;
        }
        body[data-theme="light"] .btn-pass-free:active:not(:disabled){
            transform: none !important;
        }

        body[data-theme="light"] .border-white\/10,
        body[data-theme="light"] .border-white\/15,
        body[data-theme="light"] .border-white\/20,
        body[data-theme="light"] .border-white\/40{
            border-color: var(--nyt-border) !important;
        }

        body[data-theme="light"] .bg-black\/20,
        body[data-theme="light"] .bg-black\/25,
        body[data-theme="light"] .bg-black\/30,
        body[data-theme="light"] .bg-black\/40,
        body[data-theme="light"] .bg-black\/60,
        body[data-theme="light"] .bg-black\/70{
            background: rgba(0,0,0,0.04) !important;
        }

        body[data-theme="light"] #leaderboard-btn,
        body[data-theme="light"] #rules-btn,
        body[data-theme="light"] #bmc-btn{
            background: rgba(255,255,255,0.7) !important;
            border-color: var(--nyt-border) !important;
            color: var(--nyt-text) !important;
        }

        body[data-theme="light"] #touch-submit,
        body[data-theme="light"] #mobile-submit{
            background: var(--nyt-accent) !important;
            border-color: var(--nyt-accent) !important;
            color: #fff !important;
        }

        body[data-theme="light"] #share-panel{
            background: rgba(255,255,255,0.75) !important;
            border-color: var(--nyt-border) !important;
        }

        body[data-theme="light"] #rules-panel > div{
            background: #f8f5ef !important;
            border-color: var(--nyt-border) !important;
            color: var(--nyt-text) !important;
        }

        body[data-theme="light"] #rules-panel h3{
            color: var(--nyt-text) !important;
        }

        body[data-theme="light"] #rules-panel{
            background: var(--nyt-bg) !important;
            backdrop-filter: none !important;
        }

        body[data-theme="light"] #leaderboard-overlay{
            background: var(--nyt-bg) !important;
            backdrop-filter: none !important;
        }
        body[data-theme="light"] #leaderboard-overlay .leaderboard-card{
            background: #f8f5ef;
            border-color: #ddd3c7;
            color: #1a1a1a;
            box-shadow: 0 12px 30px rgba(20, 14, 8, 0.12);
        }
        body[data-theme="light"] #leaderboard-overlay .leaderboard-header{
            border-color: #e2d9cc;
        }
        body[data-theme="light"] #leaderboard-title{
            color: #2a231b;
        }
        body[data-theme="light"] #leaderboard-close{
            color: #4f4437;
            border-color: #d6cbbd;
            background: #f3eee6;
        }
        body[data-theme="light"] #leaderboard-tabs{
            border-color: #e0d5c8;
            background: #f5f1ea;
        }
        body[data-theme="light"] .leaderboard-tab{
            padding: 0.375rem 0.75rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 700;
            letter-spacing: 0.03em;
            color: #5c5143;
            border: 1px solid transparent;
            background: transparent;
        }
        body[data-theme="light"] .leaderboard-tab-active{
            color: #2b241c;
            border-color: #d6cbbd;
            background: #e9e1d6;
        }
        body[data-theme="light"] .leaderboard-row{
            border: 1px solid #ddd3c7;
            background: #f7f2eb;
            transition: background 140ms ease;
        }
        body[data-theme="light"] .leaderboard-row:hover{
            background: #eee5d9;
        }
        body[data-theme="light"] .leaderboard-rank{
            color: #6b5b45;
            font-weight: 700;
        }
        body[data-theme="light"] .leaderboard-name{
            color: #1f1b16;
        }
        body[data-theme="light"] .leaderboard-score{
            color: #1f1b16;
            font-weight: 800;
        }
        body[data-theme="light"] #leaderboard-loading,
        body[data-theme="light"] #leaderboard-empty{
            color: #5c5143;
        }
        body[data-theme="dark"] #leaderboard-overlay{
            background: var(--nyt-bg) !important;
            backdrop-filter: none !important;
        }
        body[data-theme="dark"] #rules-panel > div{
            background: #0f0f0f !important;
            border-color: var(--nyt-border) !important;
            color: var(--nyt-text) !important;
        }
        body[data-theme="dark"] #rules-panel{
            background: var(--nyt-bg) !important;
            backdrop-filter: none !important;
        }
        body[data-theme="dark"] #leaderboard-overlay .leaderboard-card{
            background: rgba(15,15,15,0.95);
            border-color: rgba(77,63,42,0.9);
            color: #d6c3a3;
            box-shadow: 0 12px 30px rgba(0,0,0,0.45);
        }
        body[data-theme="dark"] #leaderboard-overlay .leaderboard-header{
            border-color: rgba(42,33,22,0.9);
        }
        body[data-theme="dark"] #leaderboard-title{
            color: #d6c3a3;
        }
        body[data-theme="dark"] #leaderboard-close{
            color: rgba(214,195,163,0.7);
            border-color: rgba(77,63,42,0.6);
            background: rgba(0,0,0,0.2);
        }
        body[data-theme="dark"] #leaderboard-tabs{
            border-color: rgba(77,63,42,0.6);
            background: rgba(0,0,0,0.2);
        }
        body[data-theme="dark"] .leaderboard-tab{
            padding: 0.375rem 0.75rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 700;
            letter-spacing: 0.03em;
            color: rgba(214,195,163,0.75);
            border: 1px solid transparent;
            background: transparent;
        }
        body[data-theme="dark"] .leaderboard-tab-active{
            color: #d6c3a3;
            border-color: rgba(77,63,42,0.6);
            background: rgba(26,20,12,0.8);
        }
        body[data-theme="dark"] .leaderboard-row{
            border: 1px solid rgba(77,63,42,0.6);
            background: rgba(0,0,0,0.2);
            transition: background 140ms ease;
        }
        body[data-theme="dark"] .leaderboard-row:hover{
            background: rgba(0,0,0,0.3);
        }
        body[data-theme="dark"] .leaderboard-rank{
            color: #d6c3a3;
            font-weight: 700;
        }
        body[data-theme="dark"] .leaderboard-name{
            color: #d6c3a3;
        }
        body[data-theme="dark"] .leaderboard-score{
            color: #d6c3a3;
            font-weight: 800;
        }
        body[data-theme="dark"] #leaderboard-loading,
        body[data-theme="dark"] #leaderboard-empty{
            color: rgba(214,195,163,0.75);
        }
        /* Optic centering for glyphs */
        .symbol{ display:flex; align-items:center; justify-content:center; line-height: 1; }
        .symbol .glyph{ position: relative; top: 0.02em; }
        .symbol[data-letter="J"] .glyph{ left: 0.035em; }
        .symbol[data-letter="Ä°"] .glyph{ left: 0.01em; }


        /* --- Joker visual cue (Classic mode) --- */
        .symbol{ position: relative; }
        .symbol::after{
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            opacity: 0;
            /* subtle green tint + halo when joker available */
            background: radial-gradient(120% 120% at 50% 35%,
              rgba(46, 204, 113, 0.14),
              rgba(0,0,0,0) 58%);
            box-shadow:
              inset 0 0 0 1px rgba(46, 204, 113, 0.28),
              0 0 10px rgba(46, 204, 113, 0.18);
            transition: opacity 140ms ease;
        }
        body.has-joker .symbol::after{
            opacity: 1;
        }
        body[data-theme="light"].has-joker .symbol::after{
            opacity: 0;
            background: none;
            box-shadow: none;
        }

        @keyframes jokerPulse {
            0%, 100% { filter: drop-shadow(0 0 0 rgba(46,204,113,0)); }
            50% { filter: drop-shadow(0 0 8px rgba(46,204,113,0.18)); }
        }
        body.has-joker .reel-container{
            animation: jokerPulse 1.8s ease-in-out infinite;
        }

/* UI: Joker bar kaldÄ±rÄ±ldÄ± (glow yeterli) */
#joker-bar{display:none !important;}



/* =========================
   Overlay footer spacing (home vs end)
   - Home screen: more breathing room
   - End screen: tighter to prevent overflow on mobile
========================= */
#game-overlay.state-home .footer-block{
  margin-top: 2.5rem; /* like mt-10 */
}
@media (min-width: 640px){
  #game-overlay.state-home .footer-block{
    margin-top: 3rem; /* like sm:mt-12 */
  }
}
#game-overlay.state-end .footer-block{
  margin-top: 1.25rem; /* tighter on game over */
}
@media (min-width: 640px){
  #game-overlay.state-end .footer-block{
    margin-top: 1.5rem;
  }
}

/* Share panel collapse */
#share-panel.is-collapsed #share-body{ display:none; }
#share-panel.is-collapsed #share-toggle-icon{ transform: rotate(-90deg); }
#share-toggle-icon{ transition: transform .15s ease; }
</style>
</head><body class="h-[100dvh] w-full overflow-hidden m-0 p-0 flex items-center justify-center" x-apple-data-detectors="false"><div class="w-full h-[100dvh] max-w-xl glass p-4 sm:p-8 rounded-none sm:rounded-[3rem] shadow-2xl relative border-t border-white/10 flex flex-col overflow-hidden">
<div class="hud mb-4 sm:mb-8"><div class="hud-box hud-right bg-black/40 px-4 sm:px-6 py-2 sm:py-3 rounded-2xl border border-white/5 flex flex-col items-center relative min-w-[118px]"><span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">SKOR</span><span id="score" class="text-3xl font-black text-emerald-400">0</span></div><div class="hud-center text-center"><h1 class="text-xl font-black text-blue-400 leading-none mb-1 italic">DÄ°ZGÄ°â€¹</h1><div id="dev-badge" class="hidden mt-2 text-[10px] font-black tracking-[0.25em] text-rose-300/90">
 DEV: KABUL AÃ‡IK
 </div><div id="dev-wordcheck" class="hidden mt-2 text-[11px] font-bold tracking-wide"></div>
<div id="dev-test-panel" class="hidden mt-2 p-2 rounded-xl bg-black/25 border border-white/10">
  <div class="text-[10px] font-black tracking-[0.22em] text-slate-200/80 mb-1">DEV TEST</div>
  <input id="dev-test-input" type="text" autocomplete="off" autocapitalize="off" spellcheck="false"
    class="w-full px-2 py-1 rounded-lg bg-black/30 border border-white/10 text-[12px] font-bold tracking-wide text-slate-100 placeholder:text-slate-400/70 focus:outline-none focus:ring-2 focus:ring-rose-400/40"
    placeholder="kelime yaz + Enter (Ã¶rn: topluk / topÃ§u)" />
  <div id="dev-test-result" class="mt-1 text-[12px] font-bold tracking-wide text-slate-300"></div>
</div><div id="devEasyWord" class="hidden mt-1 text-[11px] font-bold tracking-wide text-amber-200/90"></div></div><div class="hud-box hud-left bg-black/40 px-4 sm:px-6 py-2 sm:py-3 rounded-2xl border border-white/5 flex flex-col items-center relative min-w-[118px]"><span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">SÃœRE</span><span id="timer" class="text-3xl font-black text-white">75</span><div id="time-pop" class="hidden absolute -right-2 -top-2 px-2 py-1 rounded-full text-xs font-black shadow-lg text-emerald-300 bg-emerald-950/70 border border-emerald-400/20">+5</div><div id="time-bonus-pop" class="pointer-events-none absolute -right-2 -top-2 hidden text-emerald-300 font-black text-lg">+5</div><div id="time-bonus-toast" class="hidden mt-1 text-sm font-black text-sky-300 tracking-wider">+10 SN</div></div></div><div class="grid grid-cols-3 gap-3 bg-slate-950 p-4 rounded-[2rem] border-4 border-slate-800 shadow-inner mb-8 relative"><div class="absolute top-1/3 left-0 w-full h-[1px] bg-white/10 pointer-events-none z-10"></div><div class="absolute top-2/3 left-0 w-full h-[1px] bg-white/10 pointer-events-none z-10"></div><div class="reel-container rounded-2xl overflow-hidden shadow-lg"><div id="reel-0" class="reel"></div></div><div class="reel-container rounded-2xl overflow-hidden shadow-lg"><div id="reel-1" class="reel"></div></div><div class="reel-container rounded-2xl overflow-hidden shadow-lg"><div id="reel-2" class="reel"></div></div></div><div class="space-y-6"><div class="relative"><input id="word-input" type="text" placeholder="" maxlength="9" disabled
 class="w-full bg-slate-900 border-2 border-slate-700 rounded-3xl px-4 sm:px-6 py-4 sm:py-6 text-2xl sm:text-3xl font-black focus:outline-none focus:border-blue-500 transition-all uppercase tracking-[0.3em] text-center shadow-2xl"
 autocomplete="off"><div id="inline-hint" class="mt-2 text-center text-sm font-bold min-h-[1.25rem] text-[#D6C89A] opacity-0 transition-opacity"></div><div id="status-indicator" class="absolute right-6 top-1/2 -translate-y-1/2 hidden"><div class="animate-spin h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full"></div><div class="space-y-3"><div id="touch-keys" class="grid grid-cols-6 gap-2 sm:gap-3"></div><div id="touch-keys-all-wrap" class="hidden"><div class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-2 text-center">Serbest Harfler (Joker/DEV)</div><div id="touch-keys-all" class="grid grid-cols-7 gap-2 sm:gap-3"></div></div><div class="grid grid-cols-3 gap-2 sm:gap-3"><button id="touch-backspace" type="button"
 class="bg-slate-800/80 hover:bg-slate-700/90 border border-white/10 rounded-2xl py-4 font-black tracking-wider uppercase text-xs">
 Sil
 </button><button id="touch-clear" type="button"
 class="bg-slate-800/80 hover:bg-slate-700/90 border border-white/10 rounded-2xl py-4 font-black tracking-wider uppercase text-xs">
 Temizle
 </button><button id="touch-submit" type="button"
 class="bg-emerald-600/80 hover:bg-emerald-500/90 border border-white/10 rounded-2xl py-4 font-black tracking-wider uppercase text-xs">
 GÃ¶nder
 </button></div></div></div></div><div class="flex flex-col gap-3"><div id="mobile-actions" class="mobile-only w-full flex gap-3"><button id="mobile-clear" type="button" class="btn-action flex-1 text-white/90 font-black py-4 rounded-2xl transition-all uppercase text-sm tracking-[0.2em] shadow-xl">TEMÄ°ZLE</button><button id="mobile-submit" type="button" class="btn-action flex-1 text-white font-black py-4 rounded-2xl transition-all uppercase text-sm tracking-[0.2em] shadow-xl">GÃ–NDER</button></div><button id="pass-btn" disabled
 class="btn-pass w-full text-white font-black py-5 rounded-2xl transition-all uppercase text-sm tracking-[0.2em] shadow-xl flex items-center justify-center gap-2"><span>TEKRAR Ã‡EVÄ°R</span><span id="pass-badge" class="bg-black/20 px-2 py-1 rounded text-[10px]">-30 PUAN</span></button><div id="joker-bar" class="hidden bg-slate-900/50 p-4 rounded-2xl border border-slate-800 flex justify-between items-center px-6 relative min-w-0"><span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest flex-1 min-w-0 truncate">JOKER <span class="normal-case">(ekstra 1 harf kullanÄ±m hakkÄ±)</span></span><span class="text-2xl sm:text-3xl font-black text-purple-300 flex items-center gap-2 flex-none"><span class="text-2xl sm:text-3xl">ğŸƒ</span><span id="joker-count">0</span><span id="joker-pop" class="hidden text-emerald-300 text-base sm:text-lg font-black ml-2">+1</span></span></div><div class="bg-slate-900/50 p-3 rounded-2xl border border-slate-800 flex justify-between items-center px-6 hidden"><span class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">Potansiyel KazanÃ§</span><span id="potential" class="text-xl font-black text-blue-400">0</span></div></div></div><div id="message" class="mt-2 hidden text-center text-sm font-bold min-h-[1.25rem] text-slate-400">
</div><div id="game-overlay" class="absolute inset-0 z-50 rounded-[2.5rem] flex flex-col items-center justify-center p-8 text-center overlay state-home"><button id="theme-toggle" type="button" class="theme-btn" aria-label="Tema deÄŸiÅŸtir" title="Tema deÄŸiÅŸtir">ğŸŒ™</button><h2 id="overlay-title" class="text-4xl font-black text-white mb-2">DÄ°ZGÄ°â€¹</h2><p id="overlay-desc" class="text-slate-400 mb-6 max-w-[520px]">Bir kelime tÃ¼retme oyunu! SÃ¼re bitmeden elinden geleni yap.</p><div class="flex gap-3 flex-wrap justify-center">
  <button id="easy-btn"
    class="border border-white/20 hover:border-white/40 px-10 py-5 rounded-2xl font-bold text-lg active:scale-95 transition-all uppercase tracking-wider">
    KOLAY
  </button>
  <button id="classic-btn"
    class="border border-white/20 hover:border-white/40 px-10 py-5 rounded-2xl font-bold text-lg active:scale-95 transition-all uppercase tracking-wider">
    KLASÄ°K
  </button>
</div>
<button id="leaderboard-btn"
        class="mt-5 w-56 px-6 py-3 rounded-2xl bg-[#1a1a1a]/80 border border-[#4d3f2a] text-[#d6c3a3] font-bold tracking-wider hover:bg-[#2a2a2a]/80 transition">
        ZÄ°RVEDEKÄ°LER
      </button>

      <button id="rules-btn"
  class="mt-5 border border-[#D6C89A]/40 hover:border-[#D6C89A]/70 text-[#D6C89A] px-8 py-3 rounded-xl font-bold text-sm active:scale-95 transition-all uppercase tracking-wider">
  KURALLAR
</button><div id="share-panel" class="hidden mt-6 w-full max-w-[520px] bg-black/40 border border-white/10 rounded-2xl p-4 text-left">
  <button id="share-toggle" type="button" class="w-full flex items-center justify-between gap-3 text-left">
    <span class="text-white font-bold tracking-wider">SKORUNU PAYLAÅ</span>
    <span id="share-toggle-icon" class="text-slate-300 font-black tracking-wider">â–¼</span>
  </button>

  <div id="share-body" class="mt-3">
    <pre id="share-text-box" class="whitespace-pre-wrap text-slate-200 text-sm bg-black/30 border border-white/10 rounded-xl p-3 select-text"></pre>
    <div class="mt-3 flex items-center justify-center gap-3 flex-wrap">
      <button id="copy-share-btn" type="button"
        class="border border-white/20 hover:border-white/40 bg-white/10 hover:bg-white/15 text-white px-6 py-3 rounded-2xl font-bold text-sm active:scale-95 transition-all uppercase tracking-wider">
        KOPYALA
      </button>
      <div id="copy-hint" class="hidden text-emerald-300 text-xs font-bold tracking-wider">KOPYALANDI âœ…</div>
    </div>
  </div>
</div>

<div class="footer-block text-slate-500 text-xs leading-relaxed"><div>Â© 2026 DÄ°ZGÄ°&lt;. TÃ¼m haklarÄ± saklÄ±dÄ±r.</div><div>Â© 2026 DÄ°ZGÄ°&lt;. All rights reserved.</div><div><a href="mailto:dizgi.oyunu@gmail.com" class="underline hover:text-slate-300 transition-colors">Geri bildirim ve iletiÅŸim iÃ§in: dizgi.oyunu@gmail.com</a></div></div>
<div class="mt-4">
  <a id="bmc-btn" href="https://buymeacoffee.com/dizgioyunu" data-bmc="1" data-bmc-placement="home_ui" target="_blank" rel="noopener noreferrer"
     class="inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-[#4d3f2a]/70 bg-black/20 text-[#d6c3a3] font-bold tracking-wider hover:bg-black/30 transition text-[11px] uppercase">
    â˜• Bir kahve Ä±smarla
  </a>
</div><div id="rules-panel" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm">
  <div class="w-full max-w-[520px] bg-black/60 border border-white/15 rounded-3xl p-5 text-slate-200 shadow-2xl">
    <div class="flex items-start justify-between gap-4">
      <h3 class="text-xl font-bold text-white tracking-wider">KURALLAR</h3>
      <button id="rules-close-btn" type="button"
        class="shrink-0 border border-white/20 hover:border-white/40 bg-white/10 hover:bg-white/15 text-white px-5 py-2 rounded-xl font-bold text-xs active:scale-95 transition-all uppercase tracking-wider">
        KAPAT
      </button>
    </div>

    <div class="mt-4 text-left text-sm leading-relaxed space-y-3 max-h-[70vh] overflow-y-auto pr-1">
            <p><span class="text-white font-bold">DÄ°ZGÄ°&lt;</span> bir kelime tÃ¼retme oyunudur!</p>

      <p><span class="text-white font-bold">AmaÃ§:</span> Verilen sÃ¼re iÃ§inde, her â€œspinâ€ (Ã§evirme) sonrasÄ± gelen harfleri kullanarak kelime oluÅŸturmak ve en yÃ¼ksek skoru almak. Daha uzun kelime; daha fazla sÃ¼re, â€œserbest Ã§evirmeâ€ ve â€œjokerâ€ anlamÄ±na gelebilir.</p>

      <p><span class="text-white font-bold">Harfler:</span> Her tur ekranda <span class="text-white font-bold">9 harf</span> olur: <span class="text-white font-bold">3 sesli + 6 sessiz</span>. Bu harflerle <span class="text-white font-bold">3â€“9 harfli</span> kelimeler yaz.</p>

      <p><span class="text-white font-bold">Kolay mod:</span> En az <span class="text-white font-bold">6 harfli</span> bir kelime harf setinin iÃ§inde gizlidir. Kelime bulmak daha kolaydÄ±r ancak skor ve bonuslar yÃ¶nÃ¼nden dengeleyici bir dezavantaj vardÄ±r (puanlar daha dÃ¼ÅŸÃ¼k katsayÄ±yla hesaplanÄ±r). Kolay ve Klasik mod skorlarÄ± <span class="text-white font-bold">ayrÄ± listelerde</span> gÃ¶sterilir.</p>

      <p><span class="text-white font-bold">Klasik mod:</span> Harf setleri tamamen rastlantÄ±sal oluÅŸur. Toplam puan dezavantajÄ± yoktur.</p>

      <p><span class="text-white font-bold">Pas:</span> (Space / Pas) Turu geÃ§ersin. Serbest Ã§evirme hakkÄ±n yoksa <span class="text-white font-bold">-30</span> puan.</p>

      <p><span class="text-white font-bold">Uzun kelime bonusu:</span><br>
        <span class="text-white font-bold">Klasik modda:</span> 7â€“8 harfli kelimeler <span class="text-white font-bold">+50</span> puan, 9 harfli kelimeler <span class="text-white font-bold">+100</span> puan.<br>
        <span class="text-white font-bold">Kolay modda:</span> 7â€“8 harfli kelimeler <span class="text-white font-bold">+25</span> puan, 9 harfli kelimeler <span class="text-white font-bold">+40</span> puan.
      </p>

      <p><span class="text-white font-bold">Serbest Ã§evirme bonusu:</span> Kolay modda 4 harfli kelime ve Ã¼stÃ¼ cezasÄ±z yeniden Ã§evirme hakkÄ± verir. â€œTekrar Ã§evirâ€ Ã§ubuÄŸu bu durumda yeÅŸil yanar.</p>

      <p><span class="text-white font-bold">SÃ¼re bonusu:</span> Klasik modda 4 harfli kelime ve Ã¼stÃ¼, kolay modda 5 harfli kelime ve Ã¼stÃ¼; kelimenin uzunluÄŸuna baÄŸlÄ± olarak ek sÃ¼re kazandÄ±rÄ±r.</p>

      <p><span class="text-white font-bold">Joker:</span> Klasik modda 5 harfli kelime ve Ã¼stÃ¼ â€œjokerâ€ kazandÄ±rÄ±r. Harflerde yeÅŸil bir parÄ±ltÄ± olmasÄ± jokeriniz olduÄŸu anlamÄ±na gelir. Bu durumda harf setindeki bir harfi fazladan bir kez daha kullanma hakkÄ±nÄ±z vardÄ±r.</p>
    </div>
  </div>
</div>

<script>


        // =========================
        // WORDLIST LOADING (vNext)
        // =========================
        // Primary source: external txt next to this HTML (cached by browser)
        // Fallback: small embedded list so the game still opens offline / on fetch failure.
        const EXTERNAL_WORDLIST_URL = "tr_tr_wordlist_len_le_9_unique.txt";
        const WORDLIST_CACHE_KEY = "dizgi_wordlist_cache_v1";

        // NOTE: Fallback is intentionally limited. It is only used if the external wordlist cannot be loaded.
        const FALLBACK_WORDS = ["acÄ±", "ada", "adrenalin", "aksatanda", "alabilsen", "alakalan", "alanÄ±nÄ±nÄ±", "alelÄ±tlak", "alengirli", "almamaksa", "almamamla", "alnÄ±ndaki", "alparslan", "altimetre", "altÄ±nekin", "alÄ±namasa", "alÄ±nmakla", "alÄ±nmaksa", "alÄ±nmakta", "alÄ±nmamak", "alÄ±nmamam", "alÄ±nmaman", "alÄ±nmamla", "alÄ±nmasak", "alÄ±nmasam", "alÄ±nmayan", "alÄ±nmayla", "alÄ±nÄ±rken", "alÄ±nÄ±rsan", "anakronik", "anlamamam", "anlamanda", "anlamasan", "anlatamam", "anlatanda", "anlatansa", "anlatmamÄ±", "anlatmanÄ±", "anlatmasa", "anlatÄ±lsa", "anlatÄ±mla", "annemindi", "anneminki", "antarktik", "antipatik", "antisemit", "antrenman", "ara", "arabistan", "aramalÄ±nÄ±", "aranansa", "aranÄ±lanÄ±", "aranÄ±rlÄ±k", "aranÄ±ÅŸtan", "arattÄ±rÄ±n", "aritmetik", "art", "artakalan", "artakalÄ±r", "arÄ±", "asarlÄ±kta", "asimetrik", "aslanÄ±mla", "atamanken", "atanmamam", "atanmasam", "atardamar", "atlamamam", "atlatÄ±lsa", "atÄ±klarsa", "ayriyeten", "ayrÄ±lansa", "ayrÄ±larak", "bak", "bakakalan", "balatekin", "ban", "bas", "bat", "benimkini", "bez", "bil", "bilinenli", "bilinerek", "bin", "bit", "biÃ§", "boz", "boÄŸ", "bul", "bÃ¶l", "bÃ¼k", "bÃ¼z", "bÄ±k", "bÄ±yÄ±klÄ±", "cay", "coÅŸ", "dal", "damalÄ±", "danimarka", "delililik", "delinerek", "delinirse", "deminkini", "denememek", "denememen", "denetimle", "denetimli", "denetmeni", "denilirse", "deÄŸ", "deÅŸ", "dik", "dil", "din", "dinamitle", "dinlenesi", "dinlenmen", "dinletili", "direnilse", "direnmemi", "diz", "dol", "don", "doy", "doÄŸ", "dur", "duy", "dÃ¶k", "dÃ¶n", "dÃ¶v", "dÃ¼z", "dÃ¼ÅŸ", "edelerken", "edememeli", "edemeyeni", "edenlerle", "edenlerse", "ederlerse", "edilemese", "edilesini", "edilirken", "edilirlik", "edilirsen", "edilmekle", "edimlerle", "ekalliyet", "ekiÅŸirken", "eklemesek", "ekmekÃ§i", "eksantrik", "eksilerle", "eksiltili", "elemendik", "elenirsek", "elenirsem", "eleniÅŸten", "elenmekti", "eleÅŸtirel", "eleÅŸtirin", "emrederek", "emredilen", "emredilir", "emrindeki", "enteresan", "eri", "eriklerle", "eriyikten", "eriÅŸirken", "eriÅŸirlik", "eriÅŸtiren", "eriÅŸtirir", "esenlikle", "esenlikli", "esenlikte", "etmendeki", "ettilerdi", "ettirilse", "ettirmemi", "ettirmeni", "ettirmese", "eylemesen", "eÅŸelerken", "eÅŸiklerle", "garantile", "gel", "gelinerek", "gelinilen", "gelinilir", "ger", "gez", "geÃ§", "gir", "git", "giy", "gÃ¶m", "gÃ¶r", "gÃ¶Ã§", "gÃ¼l", "ilgilenil", "ilmindeki", "inaltekin", "inanÄ±rlÄ±k", "indirilse", "indirimin", "indirimle", "indirimli", "indirmeni", "ingiltere", "inletilip", "inletmese", "insaniyet", "irkilteni", "irkiltmek", "iskarpela", "ismininse", "istenense", "istenilse", "istikamet", "itelerken", "kak", "kal", "kalakalan", "kalakalma", "kalakalÄ±r", "kalanÄ±msa", "kalenderi", "kalkanÄ±ma", "kalÄ±narak", "kalÄ±nmasa", "kalÄ±nmaya", "kalÄ±nÄ±lan", "kameraman", "kamil", "kan", "kanaatkar", "kanunname", "kap", "kapÄ±l", "kar", "karabakal", "karabasan", "karabatak", "karaduran", "karaisalÄ±", "karakarga", "karakaÃ§an", "karakulak", "karalardÄ±", "karamanlÄ±", "karapÄ±nar", "kararname", "karasinek", "karat", "karataban", "karayanÄ±k", "karayÄ±lan", "karnÄ±kara", "kas", "kat", "katakulli", "katalitik", "katederek", "katedilen", "katÄ±lansa", "katÄ±lÄ±nan", "kay", "kayalarsa", "kaymaklan", "kaynaklan", "kaz", "kaÅŸ", "kereminki", "kes", "keseninse", "kesimimin", "kesiminki", "kesintili", "kesintisi", "kestirimi", "kimiminki", "kiminkini", "kimliklik", "kinematik", "kiremidin", "kirleteni", "kirletile", "kirletsek", "kok", "kokainman", "kop", "koramiral", "kov", "koy", "koÅŸ", "kullansan", "kur", "kus", "kÃ¼s", "kÄ±lÄ±narak", "kÄ±r", "kÄ±y", "kÄ±z", "mantinota", "matematik", "melankoli", "menederse", "menedilen", "menedilir", "metrekare", "mililitre", "milimetre", "milletime", "milletimi", "minnettar", "mob", "mono", "mukarenet", "mutallaka", "mÃ¼bah", "nanemolla", "narlÄ±dere", "nasrettin", "opak", "pan", "parametre", "penisilin", "piÅŸ", "posta", "pus", "pÄ±s", "rakibimin", "rengarenk", "riayetkar", "roketatar", "saklansan", "sal", "salatalÄ±k", "salisilat", "salisilik", "salÄ±narak", "san", "sap", "sar", "saraykent", "sarÄ±kanat", "sarÄ±lÄ±nan", "sat", "sav", "say", "saÃ§", "saÄŸ", "sek", "sektireme", "selametle", "seliminki", "senirkent", "sentaktik", "ser", "serenliyi", "sev", "sevda", "sez", "seÃ§", "sil", "silindire", "silinerek", "silinirse", "silinmese", "silinmesi", "silintisi", "sin", "sindirile", "sinematek", "sinematik", "sok", "sol", "sonrakini", "sor", "soy", "sun", "sus", "sÃ¶v", "sÃ¼z", "sÄ±k", "sÄ±z", "sÄ±ÄŸ", "taallukat", "tad", "tadamamak", "tak", "takdirkar", "taklidini", "takÄ±lÄ±nan", "talepname", "talimname", "tan", "tap", "tar", "tasarÄ±mla", "tat", "tatminkar", "taÅŸ", "tedarikle", "tekerdeki", "tekerimin", "tekerleme", "tele", "telemetre", "telemetri", "temsilini", "tenkidini", "tep", "tepeninse", "tepetakla", "terelelli", "teriminki", "testerele", "tiroid", "tos", "tut", "tÃ¼n", "tÃ¼t", "tÃ¼y", "tÄ±k", "tÄ±n", "ula", "ulu", "uyu", "uza", "var", "ver", "vur", "yak", "yakalarsa", "yal", "yalanÄ±mla", "yaltaklan", "yan", "yandakini", "yap", "yapÄ±lÄ±", "yar", "yaralarsa", "yas", "yat", "yay", "yaz", "yaÅŸ", "yel", "yemenimin", "yen", "yenememek", "yenilemem", "yenilense", "yenilikle", "yenilikse", "yenilikte", "yenilikti", "yenililik", "yenilinen", "yenilirse", "yenilmemi", "yer", "yet", "yevmiye", "yit", "yol", "yor", "yum", "yumul", "yun", "yut", "yÃ¼z", "yÄ±k", "yÄ±l", "yÄ±ÄŸ", "Ã§ak", "Ã§al", "Ã§anakkale", "Ã§ap", "Ã§at", "Ã§ek", "Ã§ekilinen", "Ã§el", "Ã§im", "Ã§it", "Ã§iz", "Ã§Ã¶k", "Ã§Ã¶z", "Ã§Ä±k", "Ã¶de", "Ã¶nerilini", "Ã¼rÃ¼", "Ã¼stsÃ¼z", "Ä±ra", "Ä±ÅŸÄ±", "ÅŸaÅŸ", "ÅŸeklinini", "ÅŸiÅŸ"];

        // Core letter sets (used by both gameplay + easy-candidate derivation)
        const VOWELS = "AEIÄ°OÃ–UÃœ".split('');
        const CONSONANTS = "BCÃ‡DFGÄHJKLMNPRSÅTVYZ".split('');

        const VOWELS_LC = new Set(["a","e","Ä±","i","o","Ã¶","u","Ã¼"]);
        function countVowelsLC(w){
            let c=0;
            for (const ch of w) { if (VOWELS_LC.has(ch)) c++; }
            return c;
        }
        function countConsonantsLC(w){
            let c=0;
            for (const ch of w) { if (!VOWELS_LC.has(ch)) c++; }
            return c;
        }

        let WORD_SET = new Set(FALLBACK_WORDS);
        let EASY_CANDIDATES = [];
        let externalWordlistReady = false;

        function normTR(s) {
          return (s || "")
            .toString()
            .trim()
            .toLocaleLowerCase("tr-TR")
            .replace(/[â€™']/g, "")
            .replace(/[^a-zÃ§ÄŸÄ±Ã¶ÅŸÃ¼]/g, "");
        }
        // =========================
        // PRODUCTIVE SUFFIX ACCEPT (vSuffix)
        // - Allows certain derived words even if not explicitly in WORD_SET
        // - Current enabled suffixes:
        //   * -lIk: lÄ±k/lik/luk/lÃ¼k  (e.g., kitaplÄ±k)
        //   * -lI:  lÄ±/li/lu/lÃ¼      (e.g., tuzlu, kitaplÄ±)
        //   * -sIz: sÄ±z/siz/suz/sÃ¼z  (e.g., tuzsuz, kitapsÄ±z)
        //   * -(c/Ã§)I: cÄ±/ci/cu/cÃ¼ and Ã§Ä±/Ã§i/Ã§u/Ã§Ã¼ (e.g., topÃ§u)
        // =========================
        const VOICELESS_FINALS = new Set(["p","Ã§","t","k","f","h","s","ÅŸ"]);
        const TR_VOWELS_LC = new Set(["a","e","Ä±","i","o","Ã¶","u","Ã¼"]);

        function lastVowelLC(word){
          for (let i = word.length - 1; i >= 0; i--){
            const ch = word[i];
            if (TR_VOWELS_LC.has(ch)) return ch;
          }
          return null;
        }

        function pickLIK(v){
          if (v === "a" || v === "Ä±") return "lÄ±k";
          if (v === "e" || v === "i") return "lik";
          if (v === "o" || v === "u") return "luk";
          if (v === "Ã¶" || v === "Ã¼") return "lÃ¼k";
          return null;
        }

        function pickCI(v){
          if (v === "a" || v === "Ä±") return "cÄ±";
          if (v === "e" || v === "i") return "ci";
          if (v === "o" || v === "u") return "cu";
          if (v === "Ã¶" || v === "Ã¼") return "cÃ¼";
          return null;
        }


        function pickLI(v){
          if (v === "a" || v === "Ä±") return "lÄ±";
          if (v === "e" || v === "i") return "li";
          if (v === "o" || v === "u") return "lu";
          if (v === "Ã¶" || v === "Ã¼") return "lÃ¼";
          return null;
        }

        function pickSIZ(v){
          if (v === "a" || v === "Ä±") return "sÄ±z";
          if (v === "e" || v === "i") return "siz";
          if (v === "o" || v === "u") return "suz";
          if (v === "Ã¶" || v === "Ã¼") return "sÃ¼z";
          return null;
        }

        function expectedAgentSuffix(base){
          const v = lastVowelLC(base);
          if (!v) return null;

          const ci = pickCI(v);
          if (!ci) return null;

          const last = base[base.length - 1];
          const useCedilla = VOICELESS_FINALS.has(last);
          return useCedilla ? ("Ã§" + ci.slice(1)) : ci; // cÄ±->Ã§Ä±, ci->Ã§i, cu->Ã§u, cÃ¼->Ã§Ã¼
        }

        function expectedLIK(base){
          const v = lastVowelLC(base);
          return v ? pickLIK(v) : null;
        }


        function expectedLI(base){
          const v = lastVowelLC(base);
          return v ? pickLI(v) : null;
        }

        function expectedSIZ(base){
          const v = lastVowelLC(base);
          return v ? pickSIZ(v) : null;
        }

        // Returns: { ok:true, base:"...", suffix:"..." } or { ok:false }
        function acceptsDerivedWord(keyLower){
          if (!keyLower || keyLower.length < 3) return { ok:false };

          // Try longer suffixes first
          const candidates = ["sÄ±z","siz","suz","sÃ¼z","lÄ±k","lik","luk","lÃ¼k","lÄ±","li","lu","lÃ¼","Ã§Ä±","Ã§i","Ã§u","Ã§Ã¼","cÄ±","ci","cu","cÃ¼"];

          for (const suf of candidates){
            if (!keyLower.endsWith(suf)) continue;
            const base = keyLower.slice(0, -suf.length);

            // Guard: keep roots meaningful
            if (!base || base.length < 3) continue;

            // Root must exist in dictionary
            if (!WORD_SET || !WORD_SET.has(base)) continue;

            // Validate suffix is the *correct* one for the base (vowel harmony + c/Ã§ rule)
            const isLIK = (suf === "lÄ±k" || suf === "lik" || suf === "luk" || suf === "lÃ¼k");
            const isLI  = (suf === "lÄ±"  || suf === "li"  || suf === "lu"  || suf === "lÃ¼");
            const isSIZ = (suf === "sÄ±z" || suf === "siz" || suf === "suz" || suf === "sÃ¼z");

            if (isLIK){
              const exp = expectedLIK(base);
              if (exp && exp === suf) return { ok:true, base, suffix:suf };
            } else if (isLI){
              const exp = expectedLI(base);
              if (exp && exp === suf) return { ok:true, base, suffix:suf };
            } else if (isSIZ){
              const exp = expectedSIZ(base);
              if (exp && exp === suf) return { ok:true, base, suffix:suf };
            } else {
              const exp = expectedAgentSuffix(base);
              if (exp && exp === suf) return { ok:true, base, suffix:suf };
            }
          }

          return { ok:false };
        }


        function buildEasyCandidates() {
          // Easy mode candidates: 6â€“9 letters, max 3 vowels (so it can fit into 3-vowel / 6-consonant grid)
          EASY_CANDIDATES = Array.from(WORD_SET).filter(w => {
            const len = w.length;
            if (len < 6 || len > 9) return false;
            return countVowelsLC(w) <= 3;
          });
        }

        async function initWordData() {
          // Start from fallback so the game can be used even if the external file fails.
          WORD_SET = new Set(FALLBACK_WORDS);
          externalWordlistReady = false;

          // 1) Try cached full wordlist (lets the game work offline after one successful online load)
          try {
            const cached = localStorage.getItem(WORDLIST_CACHE_KEY);
            if (cached && cached.length > 1000) {
              cached.split(/\r?\n/).forEach(line => {
                const w = normTR(line);
                if (w) WORD_SET.add(w);
              });
              externalWordlistReady = true; // ready-from-cache
            }
          } catch (_) { /* ignore storage errors */ }


          try {
            const res = await fetch(EXTERNAL_WORDLIST_URL, { cache: "force-cache" });
            if (!res.ok) throw new Error("HTTP " + res.status);
            const text = await res.text();
            try { localStorage.setItem(WORDLIST_CACHE_KEY, text); } catch (_) {}
            text.split(/\r?\n/).forEach(line => {
              const w = normTR(line);
              if (w) WORD_SET.add(w);
            });
            externalWordlistReady = true;
          } catch (e) {
            // Keep cache-based readiness if we have it; otherwise remain false.
            // (If cache was available, externalWordlistReady is already true.)
          }

          // IMPORTANT: derive any dependent lists only AFTER external load finished (success or failure)
          buildEasyCandidates();
        }

        // One-time init promise (await this before using EASY_CANDIDATES in gameplay)
        const WORDDATA_READY = initWordData();

function shuffleInPlace(arr){
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function buildEasySpinLetters(){
            if (!EASY_CANDIDATES.length) return null;

            // Try a few times in case of weird edge cases
            let target = null;
            for (let i=0; i<40; i++){
                const w = EASY_CANDIDATES[Math.floor(Math.random() * EASY_CANDIDATES.length)];
                if (countVowelsLC(w) <= 3 && countConsonantsLC(w) <= 6) { target = w; break; }
            }
            if (!target) return null;

            // DEV: remember easy target word so it can be revealed in DEV MODE
            easyTargetWord = target;
            updateDevEasyWord();

            const vowels = [];
            const consonants = [];
            for (const ch of target){
                if (VOWELS_LC.has(ch)) vowels.push(ch.toLocaleUpperCase("tr-TR"));
                else consonants.push(ch.toLocaleUpperCase("tr-TR"));
            }

            // Fill columns with random letters
            while (vowels.length < 3){
                vowels.push(VOWELS[Math.floor(Math.random() * VOWELS.length)]);
            }
            while (consonants.length < 6){
                consonants.push(CONSONANTS[Math.floor(Math.random() * CONSONANTS.length)]);
            }

            // Randomize order within each column/pool for variety
            shuffleInPlace(vowels);
            shuffleInPlace(consonants);

            const col0 = vowels.slice(0,3);
            const col1 = consonants.slice(0,3);
            const col2 = consonants.slice(3,6);

            return { target, cols: [col0, col1, col2] };
        }

        
        const SCRABBLE_SCORES = {
            'A':1, 'E':1, 'Ä°':1, 'K':1, 'L':1, 'R':1, 'T':1,
            'I':2, 'M':2, 'N':2, 'O':2, 'S':2,
            'B':3, 'D':3, 'Ãœ':3, 'Y':3, 'Z':3,
            'Ã‡':4, 'G':4, 'Å':4, 'U':4,
            'H':5, 'P':5,
            'F':7, 'Ã–':7, 'V':7,
            'J':8,
            'Ä':10
        };

        let score = 0;
        let timeLeft = 90;
        let gameActive = false;
        let isSpinning = false;
        let timerInterval = null;
        let currentLetters = [];
        let selectedSymbols = []; // tracks exact reel tile ids tapped for current input
        let symbolIdCounter = 0;

        let wordUsageCount = {};
        let freeSpins = 0;
        let jokers = 0;
let allKeysBuilt = false;
        let allKeyButtons = [];
        let lastAllKeysDisabled = null;

        // Turkish uppercase alphabet used for Joker "all letters" keyboard (no Q, W, X)
        const ALL_LETTERS = Array.from("ABCÃ‡DEFGÄHIÄ°JKLMNOÃ–PRSÅTUÃœVYZ");
// alias for legacy UI refs
Object.defineProperty(window, 'jokerCount', { get: () => jokers, set: v => { jokers = v; } });

        let pendingJokerLetter = null; // letter that is currently exceeding available count (classic joker)
        let devAccept = false;
        let devKeyBuffer = '';

        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const timeBonusToastEl = document.getElementById('time-bonus-toast');
        const timeBonusBannerEl = document.getElementById('time-bonus-banner');
        const inputEl = document.getElementById('word-input');

        // Share panel elements (safe no-op if missing)
        const sharePanelEl = document.getElementById('share-panel');
        const shareTextBoxEl = document.getElementById('share-text-box');
        const copyShareBtnEl = document.getElementById('copy-share-btn');
        const copyHintEl = document.getElementById('copy-hint');

        const shareToggleEl = document.getElementById('share-toggle');
        const shareToggleIconEl = document.getElementById('share-toggle-icon');
        const shareBodyEl = document.getElementById('share-body');

        function setShareCollapsed(collapsed) {
            if (!sharePanelEl) return;
            if (collapsed) {
                sharePanelEl.classList.add('is-collapsed');
                if (shareToggleIconEl) shareToggleIconEl.textContent = 'â–¼';
            } else {
                sharePanelEl.classList.remove('is-collapsed');
                if (shareToggleIconEl) shareToggleIconEl.textContent = 'â–¼';
            }
        }

        if (shareToggleEl && sharePanelEl) {
            shareToggleEl.addEventListener('click', () => {
                const collapsed = sharePanelEl.classList.contains('is-collapsed');
                setShareCollapsed(!collapsed);
            });
        }

        function refreshShareText() {
            if (!shareTextBoxEl) return;
            const modeLabel = (typeof gameMode !== 'undefined' && gameMode === 'easy') ? 'kolay' : 'klasik';
            const url = (location && location.origin) ? (location.origin + location.pathname) : '';
            shareTextBoxEl.textContent = `DÄ°ZGÄ°< â€” ${modeLabel}
Skor: ${score}
${url}`;
        }

        // Copy share text
        if (copyShareBtnEl && shareTextBoxEl) {
            copyShareBtnEl.addEventListener('click', async () => {
                refreshShareText();
                const textToCopy = shareTextBoxEl.textContent || '';
                let ok = false;

                try {
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        await navigator.clipboard.writeText(textToCopy);
                        ok = true;
                    }
                } catch (_) {}

                if (!ok) {
                    try {
                        const ta = document.createElement('textarea');
                        ta.value = textToCopy;
                        ta.setAttribute('readonly', '');
                        ta.style.position = 'fixed';
                        ta.style.left = '-9999px';
                        document.body.appendChild(ta);
                        ta.select();
                        ok = document.execCommand('copy');
                        ta.remove();
                    } catch (_) {}
                }

                if (copyHintEl) {
                    copyHintEl.classList.remove('hidden');
                    setTimeout(() => copyHintEl.classList.add('hidden'), 1200);
                }
            });
        }

        function updateTimeUI() {
            if (!timerEl) return;
            timerEl.textContent = String(timeLeft);
            if (timeLeft <= 10) timerEl.classList.add('timer-low');
            else timerEl.classList.remove('timer-low');
        }


        

// =========================
// Timer engine (anti-throttling / anti-background pause)
// - setInterval/requestAnimationFrame can slow down or stop when the user scrolls the page,
//   switches tab, opens overlays, or the OS puts the page in the background.
// - This timer uses real elapsed time, so the countdown always reflects the actual passage of time.
// =========================
let __timer = { running: false, remainingMs: 0, lastNow: 0 };

function __nowMs(){
    try {
        return (typeof performance !== 'undefined' && performance && typeof performance.now === 'function')
            ? performance.now()
            : Date.now();
    } catch(_) { return Date.now(); }
}

function startGameTimer(initialSeconds){
    stopGameTimer();
    __timer.running = true;
    __timer.remainingMs = Math.max(0, Math.round((Number(initialSeconds) || 0) * 1000));
    __timer.lastNow = __nowMs();
    // sync UI immediately
    timeLeft = Math.ceil(__timer.remainingMs / 1000);
    updateTimeUI();

    timerInterval = setInterval(timerTick, 250);

    // immediate tick (helps some mobile/Safari edge cases)
    try { timerTick(); } catch(_) {}
}

function stopGameTimer(){
    __timer.running = false;
    if (timerInterval) { try { stopGameTimer();
            } catch(e) {} }
    timerInterval = null;
}

function addTimeSeconds(sec){
    const s = Number(sec) || 0;
    if (s <= 0) return;

    if (__timer.running) {
        __timer.remainingMs += Math.round(s * 1000);
        // reset anchor so we don't "double subtract" a big dt right after a bonus
        __timer.lastNow = __nowMs();
        timeLeft = Math.ceil(__timer.remainingMs / 1000);
    } else {
        timeLeft += s;
    }
    updateTimeUI();
}

function timerTick(){
    if (!gameActive || !__timer.running) return;

    const now = __nowMs();
    let dt = now - (__timer.lastNow || now);
    if (!isFinite(dt) || dt < 0) dt = 0;

    __timer.lastNow = now;
    __timer.remainingMs -= dt;

    if (__timer.remainingMs <= 0) {
        __timer.remainingMs = 0;
        timeLeft = 0;
        updateTimeUI();
        endGame();
        return;
    }

    const newTL = Math.ceil(__timer.remainingMs / 1000);
    if (newTL !== timeLeft) {
        timeLeft = newTL;
        updateTimeUI();
    }
}

// Force a catch-up tick when the page comes back to foreground/focus
try {
    document.addEventListener('visibilitychange', () => { try { timerTick(); } catch(_) {} });
    window.addEventListener('focus', () => { try { timerTick(); } catch(_) {} });
    window.addEventListener('pageshow', () => { try { timerTick(); } catch(_) {} });
} catch(_) {}
// Touch coarse detection (used for mobile keyboard behavior)
        let isTouchCoarse = false;
        try {
            const hasTouch = (navigator.maxTouchPoints && navigator.maxTouchPoints > 0) || ('ontouchstart' in window);
            const coarse = window.matchMedia && window.matchMedia('(pointer: coarse)').matches;
            isTouchCoarse = coarse || hasTouch;
        } catch(e) { isTouchCoarse = (navigator.maxTouchPoints && navigator.maxTouchPoints > 0) || ('ontouchstart' in window); }

        // Mobile: never focus the word input (prevents Android keyboard popping). Desktop keeps keyboard.
        if (isTouchCoarse) {
            inputEl.disabled = true;
            inputEl.setAttribute('inputmode', 'none');
            inputEl.style.caretColor = 'transparent';
            inputEl.addEventListener('focus', () => { try { inputEl.blur(); } catch(e) {} });
            inputEl.addEventListener('pointerdown', (e) => { e.preventDefault(); });
            inputEl.addEventListener('touchstart', (e) => { e.preventDefault(); }, { passive: false });
        }
        const messageEl = document.getElementById('message');
        const potentialEl = document.getElementById('potential');

        function addScore(rawPoints){
            let pts = rawPoints || 0;
            if (gameMode === 'easy') {
                pts = Math.floor(pts * 0.6);
            }
            score += pts;
            scoreEl.textContent = score;
            return pts;
        }

        const easyBtn = document.getElementById('easy-btn');
        const classicBtn = document.getElementById('classic-btn');
        const passBtn = document.getElementById('pass-btn');
        const passBadgeEl = document.getElementById('pass-badge');
        const jokerBarEl = document.getElementById('joker-bar');
        const jokerCountEl = document.getElementById('joker-count');
        const devBadgeEl = document.getElementById('dev-badge');
        
        const devWordEl = document.getElementById('dev-wordcheck');
        const devTestPanelEl = document.getElementById('dev-test-panel');
        const devTestInputEl = document.getElementById('dev-test-input');
        const devTestResultEl = document.getElementById('dev-test-result');
const gameOverlay = document.getElementById('game-overlay');
        const statusIndicator = document.getElementById('status-indicator');

        const touchKeysEl = document.getElementById('touch-keys');
        const touchKeysAllWrapEl = document.getElementById('touch-keys-all-wrap');
        const touchKeysAllEl = document.getElementById('touch-keys-all');
        const touchBackspaceBtn = document.getElementById('touch-backspace');
        const touchClearBtn = document.getElementById('touch-clear');
        const touchSubmitBtn = document.getElementById('touch-submit');
        const reels = [document.getElementById('reel-0'), document.getElementById('reel-1'), document.getElementById('reel-2')];
        function getSymbolH(){
            const v = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--symbol-h'));
            return Number.isFinite(v) && v>0 ? v : 100;
        }

        // Performance: keep DOM size bounded so spin() doesn't get slower over time.
        // We prune old symbols from the top of each reel after each spin and then
        // re-align the transform so the last 3 (active) letters stay visible.
        const REEL_KEEP = 90; // safe headroom for animations (extra symbols) + long sessions
        function pruneReel(reel){
            const kids = reel.children;
            const over = kids.length - REEL_KEEP;
            if (over <= 0) return;
            for(let i=0; i<over; i++){
                reel.removeChild(kids[0]);
            }
            // Re-align transform to the new length without animating
            const newOffset = Math.max(0, (reel.children.length - 3) * getSymbolH());
            reel.style.transition = 'none';
            reel.style.transform = `translateY(-${newOffset}px)`;
            // force reflow so next spin transition works reliably
            void reel.offsetHeight;
        }


        function init() {
            reels.forEach((reel, idx) => {
                for(let i=0; i<30; i++) addLetterToReel(reel, idx);
            });
        }

        
        function addLetterToReel(reel, reelIdx, forcedChar=null) {
            const charList = (reelIdx === 0) ? VOWELS : CONSONANTS;
            const char = forcedChar ? forcedChar : charList[Math.floor(Math.random() * charList.length)];
            const div = document.createElement('div');
            div.className = 'symbol';
            div.dataset.symbolId = String(symbolIdCounter++);
            div.textContent = char;
            reel.appendChild(div);
            return char;
        }

        async function spin() {
            if (isSpinning) return;
            isSpinning = true;
            inputEl.disabled = true;
            passBtn.disabled = true;
            inputEl.value = '';
            if (Array.isArray(selectedSymbols)) selectedSymbols.length = 0;
            // Clear any previous highlighting immediately
            reels.forEach(r => r.querySelectorAll('.symbol.used-letter').forEach(el => el.classList.remove('used-letter')));
            pendingJokerLetter = null;
            potentialEl.textContent = '0';

            reels.forEach(r => r.querySelectorAll('.symbol').forEach(s => s.classList.remove('active-letter')));
            currentLetters = [];

            const easyPack = (gameMode === 'easy') ? buildEasySpinLetters() : null;
            const forcedCols = easyPack ? easyPack.cols : null;

            const promises = reels.map((reel, idx) => {
                return new Promise(resolve => {
                    const extra = 15 + (idx * 4);
                    const results = [];
                    for(let i=0; i<extra; i++) {
                        const forcedChar = (forcedCols && i >= extra - 3) ? forcedCols[idx][i - (extra - 3)] : null;
                        const char = addLetterToReel(reel, idx, forcedChar);
                        if(i >= extra - 3) results.push(char);
                    }
                    
                    const offset = (reel.children.length - 3) * getSymbolH();
                    reel.style.transition = `transform 1.2s cubic-bezier(0.45, 0.05, 0.55, 0.95)`;
                    reel.style.transform = `translateY(-${offset}px)`;
                    
                    setTimeout(() => {
                        currentLetters.push(...results);
                        const children = Array.from(reel.children);
                        for(let i=1; i<=3; i++) {
                            children[children.length - i].classList.add('active-letter');
                        }
                        // Prune old symbols to keep DOM small and avoid occasional stutter on long sessions
                        pruneReel(reel);
                        resolve();
                    }, 1200);
                });
            });

            await Promise.all(promises);
            isSpinning = false;
            if(gameActive) {
                inputEl.disabled = false; // keep enabled for tile taps
                if (gameMode === 'classic' && isTouchCoarse) {
                    inputEl.readOnly = true;
                    inputEl.setAttribute('inputmode','none');
                    inputEl.style.pointerEvents = 'none';
                } else {
                    inputEl.readOnly = false;
                    inputEl.style.pointerEvents = '';
                }
                passBtn.disabled = false;
                updatePassButtonUI();
                if (!isTouchCoarse) { inputEl.focus(); }
                messageEl.textContent = "Kelimeyi yaz ve GÃ¶nder'e bas!";
                messageEl.className = "mt-2 text-center text-sm font-bold min-h-[1.25rem] text-slate-400";
                const ih=document.getElementById('inline-hint'); if(ih){ih.textContent=''; ih.className='mt-2 text-center text-sm font-bold min-h-[1.25rem] text-slate-400 opacity-0';}
                renderTouchKeys();
            try { updateUsedLetterHighlights(); } catch(_) {}
            }
        }

        async function startGame() {
            if (sharePanelEl) { sharePanelEl.classList.add('hidden'); setShareCollapsed(true); }
            gameOverlay.classList.remove('state-end');
            gameOverlay.classList.add('state-home');
            if (copyHintEl) { copyHintEl.classList.add('hidden'); }
            try { closeRulesPanel(); } catch (_) {}

            document.getElementById('share-btn')?.classList.add('hidden');
            score = 0;
            timeLeft = 90;
            gameActive = true;
            scoreEl.textContent = '0';
            timerEl.textContent = '90';
            timerEl.classList.remove('timer-low');
            gameOverlay.classList.add('hidden');
            messageEl.textContent = "HazÄ±rlanÄ±yor...";
            try { await WORDDATA_READY; } catch (_) {}
            
            wordUsageCount = {};
            freeSpins = 0;
            updatePassButtonUI();
            jokers = 0;
            updateJokerUI();
            spin();
            renderTouchKeys();
            
            stopGameTimer();
            startGameTimer(timeLeft);

            updateSubmitButtonsState();
        }

        function endGame() {
            try { closeRulesPanel(); } catch (_) {}
            gameOverlay.classList.remove('state-home');
            gameOverlay.classList.add('state-end');
            if (sharePanelEl) { sharePanelEl.classList.remove('hidden'); setShareCollapsed(true); refreshShareText(); }

            document.getElementById('share-btn')?.classList.remove('hidden');
            gameActive = false;
            stopGameTimer();
            inputEl.disabled = true;
            passBtn.disabled = true;
                        updatePassButtonUI();
            updateSubmitButtonsState();

            document.getElementById('overlay-title').textContent = "SÃœRE BÄ°TTÄ°!";
            document.getElementById('overlay-desc').innerHTML = `Final Skorun: <span class='text-emerald-400 text-3xl font-black block mt-2'>${score}</span>`;
            try { maybeUpdateAndSubmitPersonalBest(score); } catch (_) {}
            try { maybeShowNameCaptureUI(); } catch (_) {}
            // overlay shows mode buttons for replay
            gameOverlay.classList.remove('hidden');
        }


        // =========================
        // Personal Best -> Netlify Forms (serverless)
        // - Only submit when player achieves a NEW personal best
        // - Player name is optional; we keep asking (lightly) after each game until saved
        // - Once saved, we reuse the name for future submissions
        // =========================
        const DIZGI_BEST_KEY = "dizgi_best_score";
        const DIZGI_SUBMITTED_KEY = "dizgi_best_score_submitted";
        const DIZGI_NAME_KEY = "dizgi_player_name";
        const DIZGI_PENDING_KEY = "dizgi_pending_best_score";
        const DIZGI_PLAYER_ID_KEY = "dizgi_player_id";

        function dizgiTodayISO() {
            // Timestamp for submissions (server-side not needed)
            return new Date().toISOString();
        }

        function sanitizePlayerName(raw) {
            let name = (raw || "").trim();
            // Basic length limit
            name = name.slice(0, 16);
            // Remove angle brackets and control chars (basic safety)
            name = name.replace(/[<>]/g, "").replace(/[\u0000-\u001F\u007F]/g, "");
            // Collapse whitespace
            name = name.replace(/\s+/g, " ");
            return name;
        }

        function getStoredPlayerName() {
            try { return localStorage.getItem(DIZGI_NAME_KEY) || ""; } catch(_) { return ""; }
        }

        function getOrCreatePlayerId() {
            try {
                let id = localStorage.getItem(DIZGI_PLAYER_ID_KEY) || "";
                if (id) return id;
                // Prefer UUID where available
                if (window.crypto && typeof window.crypto.randomUUID === "function") {
                    id = window.crypto.randomUUID();
                } else {
                    // Fallback: time + random (still fine for client-side uniqueness)
                    id = "p_" + Date.now().toString(36) + "_" + Math.random().toString(36).slice(2, 10);
                }
                localStorage.setItem(DIZGI_PLAYER_ID_KEY, id);
                return id;
            } catch(_) {
                // If storage blocked, still return a session-ish id
                return "p_" + Date.now().toString(36) + "_" + Math.random().toString(36).slice(2, 10);
            }
        }


        function setStoredPlayerName(name) {
            try { localStorage.setItem(DIZGI_NAME_KEY, name); } catch(_) {}
        }

        function getBestScore() {
            try { return Number(localStorage.getItem(DIZGI_BEST_KEY) || 0) || 0; } catch(_) { return 0; }
        }

        function setBestScore(v) {
            try { localStorage.setItem(DIZGI_BEST_KEY, String(v)); } catch(_) {}
        }

        function getLastSubmittedBest() {
            try { return Number(localStorage.getItem(DIZGI_SUBMITTED_KEY) || 0) || 0; } catch(_) { return 0; }
        }

        function setLastSubmittedBest(v) {
            try { localStorage.setItem(DIZGI_SUBMITTED_KEY, String(v)); } catch(_) {}
        }

        function getPendingBest() {
            try { return Number(localStorage.getItem(DIZGI_PENDING_KEY) || 0) || 0; } catch(_) { return 0; }
        }

        function setPendingBest(v) {
            try { localStorage.setItem(DIZGI_PENDING_KEY, String(v)); } catch(_) {}
        }

        function clearPendingBest() {
            try { localStorage.removeItem(DIZGI_PENDING_KEY); } catch(_) {}
        }

        function submitBestScoreToNetlify(payload) {
            // Requires the hidden HTML form to exist at deploy time:
            // <form name="best-score" netlify ... hidden>...</form>
            const data = new URLSearchParams();
            data.append("form-name", "best-score");

            data.append("playerName", payload.playerName || "anonim");
            data.append("playerId", payload.playerId || getOrCreatePlayerId());
            data.append("mode", payload.mode || (window.gameMode || "classic"));
            data.append("score", String(payload.score));

            // When the run ended (ISO timestamp)
            const playedAt = payload.playedAt || payload.ts || dizgiTodayISO();
            data.append("playedAt", playedAt);

            // Backward compatible field (kept for existing dashboards)
            data.append("ts", playedAt);

            // Post to site root (Netlify intercepts)
            return fetch("/", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: data.toString()
            }).catch(() => {});
        }

                function maybeUpdateAndSubmitPersonalBest(finalScore) {
            // Update local personal best; submit only when NEW best AND not already submitted
            const oldBest = getBestScore();
            const lastSubmitted = getLastSubmittedBest();

            // Only act if this run created a NEW personal best
            if (finalScore <= oldBest) return;

            // Persist new best locally
            setBestScore(finalScore);

            // Hold pending best until we have a name (or submit immediately if we do)
            if (finalScore > lastSubmitted) {
                setPendingBest(finalScore);
            }

            const name = sanitizePlayerName(getStoredPlayerName());
            if (name) {
                const pending = getPendingBest();
                if (pending > lastSubmitted) {
                    submitBestScoreToNetlify({ playerName: name, playerId: getOrCreatePlayerId(), mode: gameMode, score: pending, playedAt: dizgiTodayISO() });
                    setLastSubmittedBest(pending);
                    clearPendingBest();
                }
            }
        }

        function maybeShowNameCaptureUI() {
            // Show name capture after each game, until a name is saved.
            const name = sanitizePlayerName(getStoredPlayerName());
            if (name) return;

            const descEl = document.getElementById("overlay-desc");
            if (!descEl) return;

            // Avoid duplicating UI if endGame somehow called twice
            if (document.getElementById("dizgi-name-capture")) return;

            const wrapper = document.createElement("div");
            wrapper.id = "dizgi-name-capture";
            wrapper.className = "mt-4";
            wrapper.innerHTML = `
                <div class="text-slate-200/80 text-sm mb-2">Skorunu isimle kaydetmek ister misin? (opsiyonel)</div>
                <div class="flex items-center gap-2 justify-center">
                    <input id="dizgi-player-name-input" type="text" inputmode="text" autocomplete="nickname"
                        placeholder="Ä°smin (max 16)"
                        class="w-44 px-3 py-2 rounded-lg bg-white/10 border border-white/15 text-white outline-none focus:border-white/35"
                        maxlength="16" />
                    <button id="dizgi-player-name-save"
                        class="px-3 py-2 rounded-lg bg-emerald-500/90 hover:bg-emerald-500 text-black font-semibold">
                        Kaydet
                    </button>
                </div>
                <div class="text-slate-200/60 text-xs mt-2">Kaydedince, yeni rekorlarÄ±n bu isimle otomatik gÃ¶nderilir.</div>
            `;

            descEl.appendChild(wrapper);

            const input = document.getElementById("dizgi-player-name-input");
            const btn = document.getElementById("dizgi-player-name-save");

            const save = () => {
                const cleaned = sanitizePlayerName(input?.value || "");
                if (!cleaned) return;
                setStoredPlayerName(cleaned);

                // If we were holding a pending best, submit it now
                const pending = getPendingBest();
                const lastSubmitted = getLastSubmittedBest();
                if (pending > lastSubmitted) {
                    submitBestScoreToNetlify({ playerName: cleaned, playerId: getOrCreatePlayerId(), mode: gameMode, score: pending, playedAt: dizgiTodayISO() });
                    setLastSubmittedBest(pending);
                    clearPendingBest();
                }

                // Remove UI after saving
                const w = document.getElementById("dizgi-name-capture");
                if (w) w.remove();
            };

            btn?.addEventListener("click", save);
            input?.addEventListener("keydown", (e) => {
                if (e.key === "Enter") save();
            });
        }


        
function awardTimeOnly(len) {
    const n = Number(len) || 0;
    let bonus = 0;

    if (n === 4) bonus = 4;
    else if (n === 5) bonus = 8;
    else if (n === 6) bonus = 15;
    else if (n === 7 || n === 8 || n === 9) bonus = 20;

    if (bonus > 0) {
        addTimeSeconds(bonus);
        showTimePop(`+${bonus}`, 'text-emerald-300');
    }
}


        function awardBonuses(wordLen, opts = {}) {
    const len = Number(wordLen) || 0;
    const usedJoker = !!opts.usedJoker;

    // Time bonus (BOTH modes)
    let timeBonus = 0;

    // Classic-only resources
    let passBonus = 0;
    let jokerBonus = 0;

    // Extra point bonus (BOTH modes; multiplier handled by addScore)
    let extraPoints = 0;

    if (len === 4) {
        // Easy mode: no time bonus for 4-letter words
        timeBonus = (gameMode === "easy") ? 0 : 4;
        if (gameMode === "classic") passBonus = 1;
    } else if (len === 5) {
        timeBonus = 8;
        if (gameMode === "classic") { passBonus = 1; jokerBonus = 1; }
    } else if (len === 6) {
        timeBonus = 15;
        if (gameMode === "classic") { passBonus = 2; jokerBonus = 1; }
    } else if (len === 7 || len === 8) {
        timeBonus = 20;
        extraPoints = 50;
        if (gameMode === "classic") { passBonus = 2; jokerBonus = 2; }
    } else if (len >= 9) {
        timeBonus = 20;
        extraPoints = 100;
        if (gameMode === "classic") { passBonus = 2; jokerBonus = 2; }
    }

    
    // Easy mode balancing for extra point bonus:
    // We want the *final* bonus (after easy multiplier 0.6 + floor in addScore) to be:
    // 7-8 letters => +25, 9+ letters => +40.
    // Therefore we set raw extraPoints to 42/67 so Math.floor(extraPoints*0.6) becomes 25/40.
    if (gameMode === "easy" && extraPoints > 0) {
        extraPoints = (len >= 9) ? 67 : 42;
    }

    // If a joker-duplicate was USED on this submission, do NOT award classic-only resources.
    if (usedJoker) { passBonus = 0; jokerBonus = 0; }

    if (timeBonus > 0) {
        addTimeSeconds(timeBonus);
    }

    if (gameMode === "classic") {
        if (passBonus > 0) freeSpins += passBonus;
        if (jokerBonus > 0) jokers += jokerBonus;
        if (typeof updatePassButtonUI === "function") updatePassButtonUI();
        if (typeof updateJokerUI === "function") updateJokerUI();
    }

    if (extraPoints > 0) {
        addScore(extraPoints);
    }
}


function setInputValue(val, opts = {}) {
            const preserveSelection = !!opts.preserveSelection;
            inputEl.value = (val || '').toLocaleUpperCase('tr-TR').replace(/[^ABCÃ‡DEFGÄHIÄ°JKLMNOÃ–PRSÅTUÃœVYZ]/g, '');
            if (!preserveSelection && Array.isArray(selectedSymbols)) {
                selectedSymbols.length = 0;
            }
            {
                const wlen = inputEl.value.length;
                const pts = (wlen >= 3) ? calculateScore(inputEl.value) : 0;

                let tBonus = 0;
                if (wlen === 4) tBonus = 4;
                else if (wlen === 5) tBonus = 8;
                else if (wlen === 6) tBonus = 15;
                else if (wlen === 7 || wlen === 8 || wlen === 9) tBonus = 20;

                potentialEl.textContent = (wlen >= 3)
                    ? (() => {
                        
                        const base = `${pts}`;
                        const parts = [];
                        if (tBonus > 0) parts.push(`+${tBonus}sn`);

                        
                        
                        let missing = 0;
                        if (Array.isArray(currentLetters) && currentLetters.length) {
                            const temp = currentLetters.slice();
                            for (const ch of inputEl.value.split('')) {
                                const idx = temp.indexOf(ch);
                                if (idx > -1) temp.splice(idx, 1);
                                else missing++;
                            }


// Safe no-op: some earlier iterations referenced this. Keep it defined to prevent runtime errors.
function recomputePendingJoker() { /* no-op (computed on submit in this build) */ }
                        }

                        
                        
                        if (missing > 0 && jokers >= missing) {
                            parts.push(`-${missing} joker`);
                        } else if (missing === 0) {
                            
                            let jGain = 0;
                            if (wlen === 5 || wlen === 6) jGain = 1;
                            else if (wlen === 7 || wlen === 8 || wlen === 9) jGain = 2;
                            if (jGain > 0) parts.push(`+${jGain} joker`);
                        }

                        return parts.length ? `${base} (${parts.join(' ')})` : base;
                    })()
                    : '0';
            }
            updateSubmitButtonsState();
            renderTouchKeys();
        }

        
function appendLetter(ch, sourceSym = null) {
    // NOTE: Input must be driven by grid taps/clicks; we keep the input readable but not focusable on touch.
    // Keep this function simple and stable (no external helper dependencies).
    if (inputEl.disabled) return;
    const cur = inputEl.value || '';
    if (cur.length >= 9) return;

    const next = cur + ch;

    // Track the exact reel tile tapped so highlights follow *what you clicked*,
    // not the left-most matching letter.
    if (Array.isArray(selectedSymbols)) {
        if (sourceSym && sourceSym.classList && sourceSym.classList.contains('active-letter')) {
            const symbolId = sourceSym.dataset ? sourceSym.dataset.symbolId : null;
            if (symbolId) {
                selectedSymbols.push(symbolId);
            }
        } else {
            // Unknown source (e.g., touch keyboard / physical keyboard) â†’ disable exact-tile mapping for this word.
            selectedSymbols.length = 0;
        }
    }

    setInputValue(next, { preserveSelection: true });

    // Joker/potential logic (if present elsewhere) should be derived on submit,
    // but we keep a safe no-op hook to avoid runtime errors.
    if (typeof recomputePendingJoker === 'function') {
        try { recomputePendingJoker(); } catch(e) {}
    }
}

function backspace() {
            if (inputEl.disabled) return;
            const cur = inputEl.value || '';
            if (!cur.length) return;

            if (Array.isArray(selectedSymbols) && selectedSymbols.length) {
                selectedSymbols.pop();
            }
            setInputValue(cur.slice(0, -1), { preserveSelection: true });
            recomputePendingJoker();
        }


        // Compatibility: ensure this helper exists globally (older builds referenced it).
        window.recomputePendingJoker = window.recomputePendingJoker || function () { /* no-op */ };

        function clearInput() {
            if (inputEl.disabled) return;
            if (Array.isArray(selectedSymbols)) selectedSymbols.length = 0;
            setInputValue('', { preserveSelection: true });
            recomputePendingJoker();
        }


        function updateSubmitButtonsState() {
            const v = (inputEl.value || '').trim();
            const ok = v.length >= 3 && gameActive && !isSpinning && !inputEl.disabled;
            const mobileBtn = document.getElementById('mobile-submit');
            const touchBtn = document.getElementById('touch-submit');
            if (mobileBtn) {
                mobileBtn.disabled = !ok;
                mobileBtn.classList.toggle('opacity-50', !ok);
                mobileBtn.classList.toggle('cursor-not-allowed', !ok);
            }
            if (touchBtn) {
                touchBtn.disabled = !ok;
                touchBtn.classList.toggle('opacity-50', !ok);
                touchBtn.classList.toggle('cursor-not-allowed', !ok);
            }
        }

        function submitWord() {
            if (inputEl.disabled) return;
            const raw = (inputEl.value || '');
            const trimmed = raw.toLocaleUpperCase('tr-TR').trim();
            
            if (!gameActive || isSpinning) return;
            if (trimmed.length === 0) {
                messageEl.textContent = "Kelimeyi yaz ve GÃ¶nder'e bas!";
                messageEl.className = "mt-2 text-center text-sm font-bold min-h-[1.25rem] text-slate-400";
                const ih=document.getElementById('inline-hint'); if(ih){ih.textContent=''; ih.className='mt-2 text-center text-sm font-bold min-h-[1.25rem] text-slate-400 opacity-0';}
                return;
            }
            if (trimmed.length < 3) {
                messageEl.textContent = "En az 3 harf";
                messageEl.className = "mt-6 text-center text-sm font-black min-h-[1.5rem] text-amber-300";
                return;
            }
            checkWord(raw);
        }

        function renderTouchKeys() {
            if (!touchKeysEl) return;

            const disabledAll = (!gameActive || isSpinning || inputEl.disabled);

            const avail = {};
            for (const ch of currentLetters) avail[ch] = (avail[ch] || 0) + 1;

            const used = {};
            const cur = (inputEl.value || '').toLocaleUpperCase('tr-TR');
            for (const ch of cur.split('')) used[ch] = (used[ch] || 0) + 1;

            const letters = Object.keys(avail).sort((a,b) => a.localeCompare(b, 'tr-TR'));
            touchKeysEl.innerHTML = '';

            for (const ch of letters) {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'touch-key';
                if ((used[ch] || 0) > 0) btn.classList.add('used-now');
                const remaining = (avail[ch] || 0) - (used[ch] || 0);
                btn.disabled = disabledAll || remaining <= 0;
                btn.innerHTML = `<div class="text-xl">${ch}</div><small class="text-[10px] text-slate-400 font-black">x${avail[ch]}</small>`;
                btn.addEventListener('click', () => appendLetter(ch));
                touchKeysEl.appendChild(btn);
            }

            if (touchKeysAllWrapEl && touchKeysAllEl) {
                const showAll = (typeof jokers !== 'undefined' && jokers > 0) || (typeof devAccept !== 'undefined' && devAccept);

                if (showAll) {
                    touchKeysAllWrapEl.classList.remove('hidden');

                    // Build once, then only toggle disabled to avoid jank
                    if (!allKeysBuilt) {
                        touchKeysAllEl.innerHTML = '';
                        allKeyButtons = [];
                        for (const ch of ALL_LETTERS) {
                            const btn = document.createElement('button');
                            btn.type = 'button';
                            btn.className = 'touch-key';
                            btn.innerHTML = `<div class="text-lg">${ch}</div>`;
                            btn.addEventListener('click', () => appendLetter(ch));
                            touchKeysAllEl.appendChild(btn);
                            allKeyButtons.push(btn);
                        }
                        allKeysBuilt = true;
                        lastAllKeysDisabled = null; // force first toggle
                    }

                    if (lastAllKeysDisabled !== disabledAll) {
                        for (const btn of allKeyButtons) btn.disabled = disabledAll;
                        lastAllKeysDisabled = disabledAll;
                    }
                } else {
                    touchKeysAllWrapEl.classList.add('hidden');
                    // Keep DOM built for next time; no need to clear.
                }
            }

            if (touchBackspaceBtn) touchBackspaceBtn.disabled = disabledAll;
            if (touchClearBtn) touchClearBtn.disabled = disabledAll;
            if (touchSubmitBtn) touchSubmitBtn.disabled = disabledAll || (inputEl.value || '').length < 3;

            // Visual-only: show which letters are currently used on the grid.
            try { updateUsedLetterHighlights(); } catch (_) {}
        }

        
        function updateUsedLetterHighlights(){
            // Highlight letters currently used in the input on the 3x3 grid (and on touch keys).
            // Priority: if the player tapped reel tiles, highlight *those exact tiles* (fixes duplicate-letter mismatch).
            const cur = (inputEl?.value || '').toLocaleUpperCase('tr-TR');

            // Reset
            document.querySelectorAll('.symbol.used-letter').forEach(el => el.classList.remove('used-letter'));
            if (!cur.length) return;

            const wantLen = cur.length;

            // Exact tile mapping path (reel taps)
            if (Array.isArray(selectedSymbols) && selectedSymbols.length === wantLen) {
                const symbolMap = new Map();
                const activeSymbols = Array.from(document.querySelectorAll('.symbol.active-letter'));
                for (const el of activeSymbols) {
                    const id = el.dataset ? el.dataset.symbolId : null;
                    if (id) symbolMap.set(id, el);
                }
                const resolved = selectedSymbols.map((id) => symbolMap.get(id)).filter(Boolean);
                if (resolved.length === wantLen) {
                    for (const el of resolved) {
                        el.classList.add('used-letter');
                    }
                    return;
                }
            }

            // Fallback path: deterministic (DOM order), consume counts.
            const need = {};
            for (const ch of cur.split('')) need[ch] = (need[ch] || 0) + 1;

            const symbols = Array.from(document.querySelectorAll('.symbol.active-letter'));
            for (const el of symbols){
                const ch = (el.textContent || '').trim().toLocaleUpperCase('tr-TR');
                if (need[ch] > 0){
                    el.classList.add('used-letter');
                    need[ch]--;
                }
            }
        }


function calculateScore(word) {
            let total = 0;
            const letters = word.toLocaleUpperCase('tr-TR').split('');
            letters.forEach(l => total += (SCRABBLE_SCORES[l] || 0));
            return total * letters.length;
        }


        function applyTimeBonus(wordLength) {
            
            let bonus = 0;
            if (wordLength === 4) bonus = 4;
            else if (wordLength === 5) bonus = 8;
            else if (wordLength === 6) bonus = 15;
            else if (wordLength === 7) bonus = 20;

            if (bonus > 0) {
                addTimeSeconds(bonus);
                if (timeLeft > 10) timerEl.classList.remove('timer-low');

const label = `+${bonus} SN`;

                
                if (timeBonusToastEl) {
                    timeBonusToastEl.textContent = label;
                    timeBonusToastEl.classList.remove('hidden');
                }

                
                if (timeBonusBannerEl) {
                    timeBonusBannerEl.textContent = `SÃœRE ${label}`;
                    timeBonusBannerEl.classList.remove('hidden');
                }

                clearTimeout(window.__bonusToastTimer);
                window.__bonusToastTimer = setTimeout(() => {
                    if (timeBonusToastEl) timeBonusToastEl.classList.add('hidden');
                    if (timeBonusBannerEl) timeBonusBannerEl.classList.add('hidden');
                }, 2000);
            }
        }

        async function checkWord(word) {
            const raw = (word ?? inputEl.value ?? "").toString().trim();
            const w = raw.toLocaleUpperCase("tr-TR");
            const key = w.toLocaleLowerCase("tr-TR");

            // guards
            if (!w || w.length < 3) {
                showFeedback("En az 3 harf.", "text-red-300", "inline");
                inputEl.value = "";
                if (!isTouchCoarse) inputEl.focus();
                return;
            }
            if (w.length > 9) {
                showFeedback("En fazla 9 harf.", "text-red-300", "inline");
                inputEl.value = "";
                if (!isTouchCoarse) inputEl.focus();
                return;
            }

            // Validate letters against current spin
            const avail = Object.create(null);
            for (const ch of currentLetters) avail[ch] = (avail[ch] || 0) + 1;

            const used = Object.create(null);
            let usedDup = false;
            let dupLetter = null;

            for (const ch of w) {
                used[ch] = (used[ch] || 0) + 1;
                const a = avail[ch] || 0;

                if (used[ch] <= a) continue;

                // Classic joker: if you HAVE a joker, one letter from the set can be used 2x (once per word)
                if (gameMode === "classic" && (jokers || 0) > 0 && !usedDup && a > 0 && used[ch] === a + 1) {
                    usedDup = true;
                    dupLetter = ch;
                    continue;
                }

                showFeedback("Bu harflerle olmaz.", "text-red-300", "inline");
                inputEl.value = "";
                if (!isTouchCoarse) inputEl.focus();
                return;
            }

            // Dictionary check (devAccept bypass) + productive suffix accept
            // If not directly in WORD_SET, we allow a limited set of derived forms:
            //   -lIk (lÄ±k/lik/luk/lÃ¼k) and -(c/Ã§)I (cÄ±/ci/cu/cÃ¼ + Ã§Ä±/Ã§i/Ã§u/Ã§Ã¼)
            let __derivedInfo = null;
            if (!devAccept && !WORD_SET.has(key)) {
                const d = acceptsDerivedWord(key);
                if (!d.ok) {
                    showFeedback(`"${w}" listede yok!`, "text-[var(--accent)]", "inline");
                    setInputValue('', { preserveSelection: false });
                    if (!isTouchCoarse) inputEl.focus();
                    return;
                }
                __derivedInfo = d; // accepted via suffix rule
            }
// Accepted
            showFeedback("", "", "inline"); // clear inline message
            inputEl.value = "";

            // Score (mode multiplier is applied INSIDE addScore to avoid double-multiplying)
// Repeat-word penalty (same game): 1st = 100%, 2nd = 50%, 3rd+ = 25%
const prevCount = (wordUsageCount && typeof wordUsageCount[key] === 'number') ? wordUsageCount[key] : 0;
const newCount = prevCount + 1;
if (wordUsageCount) wordUsageCount[key] = newCount;

let repeatFactor = 1;
if (newCount === 2) repeatFactor = 0.5;
else if (newCount >= 3) repeatFactor = 0.25;

const baseRaw = calculateScore(w);
let base = Math.round(baseRaw * repeatFactor);
// Derived-word score penalty: only in classic mode
if (gameMode === "classic" && __derivedInfo) {
    base = Math.round(base * 0.8);
}

const win = addScore(base);
awardBonuses(w.length, { usedJoker: usedDup });
// Track joker-duplicate used letter (classic only)
            pendingJokerLetter = (gameMode === "classic" && usedDup) ? dupLetter : null;

            // Consume 1 joker when used (classic duplicate-a-letter joker)
            if (gameMode === "classic" && usedDup) {
                jokers = Math.max(0, (jokers || 0) - 1);
                updateJokerUI();
            }


            // Quick feedback
            if (gameMode === "classic" && usedDup && dupLetter) {
                if (newCount >= 2) {
                    const pct = (repeatFactor === 0.5) ? "%50" : "%25";
                    showFeedback(`+${win} puan â€¢ Joker: "${dupLetter}" x2 â€¢ Tekrar ${pct}`, "text-green-300", "message");
                } else {
                    showFeedback(`+${win} puan â€¢ Joker: "${dupLetter}" x2`, "text-green-300", "message");
                }
            } else {
                if (newCount >= 2) {
                    const pct = (repeatFactor === 0.5) ? "%50" : "%25";
                    showFeedback(`+${win} puan â€¢ Tekrar ${pct}`, "text-green-300", "message");
                } else {
                    showFeedback(`+${win} puan`, "text-green-300", "message");
                }
            }

            spin();
            if (!isTouchCoarse) inputEl.focus();
        }

        function showTimePop(text, cls) {
            const el = document.getElementById('time-pop');
            if (!el) return;
            el.textContent = text;
            el.className = `absolute -right-2 -top-2 px-2 py-1 rounded-full text-xs font-black shadow-lg ${cls}`;
            el.classList.remove('hidden');
            clearTimeout(window.__timePopT);
            window.__timePopT = setTimeout(() => el.classList.add('hidden'), 2000);
        }

        function showTinyBanner(text, cls) {
            const oldText = messageEl.textContent;
            const oldClass = messageEl.className;
            messageEl.textContent = text;
            messageEl.className = `mt-2 text-center text-sm font-bold min-h-[1.25rem] ${cls}`;
            setTimeout(() => {
                
                if (!gameActive) return;
                messageEl.textContent = oldText;
                messageEl.className = oldClass;
            }, 900);
        }

        function showFeedback(txt, cls, mode = "both") {
            // mode: "both" | "inline" | "message" | "auto"
            if (mode === "auto") {
                const isTouch = window.matchMedia && window.matchMedia("(hover: none) and (pointer: coarse)").matches;
                mode = isTouch ? "inline" : "message";
            }
            if (mode === "both" || mode === "message") {
                messageEl.textContent = txt;
                messageEl.className = `mt-2 text-center text-sm font-bold min-h-[1.25rem] ${cls}`;
            } else {
                messageEl.textContent = "";
            }
            const inlineHint = document.getElementById('inline-hint');
            if (inlineHint) {
                if (mode === "both" || mode === "inline") {
                    inlineHint.textContent = txt;
                    inlineHint.className = `mt-2 text-center text-sm font-bold min-h-[1.25rem] ${cls} opacity-100 transition-opacity`;
                } else {
                    inlineHint.textContent = "";
                    inlineHint.className = `mt-2 text-center text-sm font-bold min-h-[1.25rem] ${cls} opacity-0 transition-opacity`;
                }
            }
        }

        function updateDevUI() {
            if (devBadgeEl) {
                if (devAccept) devBadgeEl.classList.remove('hidden');
                else devBadgeEl.classList.add('hidden');
            }
            if (devWordEl) {
                if (devAccept) devWordEl.classList.remove('hidden');
                else devWordEl.classList.add('hidden');
            }
            if (devTestPanelEl) {
                if (devAccept) devTestPanelEl.classList.remove('hidden');
                else devTestPanelEl.classList.add('hidden');
            }
            if (!devAccept) {
                if (devTestInputEl) devTestInputEl.value = '';
                if (devTestResultEl) {
                    devTestResultEl.textContent = '';
                    devTestResultEl.classList.remove('text-emerald-300','text-rose-300','text-slate-300');
                    devTestResultEl.classList.add('text-slate-300');
                }
            }
            const devEasyEl = document.getElementById('devEasyWord');
            if (devEasyEl) {
                if (devAccept && gameMode === 'easy') devEasyEl.classList.remove('hidden');
                else devEasyEl.classList.add('hidden');
            }
            updateDevWordCheck();
            updateDevEasyWord();
            if (devAccept && devTestInputEl) {
                setTimeout(() => { try { devTestInputEl.focus(); } catch(e){} }, 0);
            }
        }

        function updateDevWordCheck() {
            if (!devWordEl) return;
            if (!devAccept) {
                devWordEl.textContent = '';
                devWordEl.classList.add('hidden');
                return;
            }
            const raw = (inputEl && inputEl.value ? inputEl.value : '').trim();
            if (!raw) {
                devWordEl.textContent = '';
                devWordEl.classList.add('hidden');
                return;
            }
            const norm = raw.toLocaleLowerCase('tr-TR');
            const direct = WORD_SET.has(norm);
            const d = direct ? null : acceptsDerivedWord(norm);
            const ok = direct || (d && d.ok);

            devWordEl.textContent = `"${raw.toLocaleUpperCase('tr-TR')}" ` + (
                direct ? 'âœ“ listede' :
                (ok ? (`âœ“ tÃ¼retim (${(d && d.base) ? d.base : '?'}+${(d && d.suffix) ? d.suffix : '?'})`) : 'âœ— listede yok')
            );
            devWordEl.classList.remove('text-emerald-300','text-rose-300','text-slate-300');
            devWordEl.classList.add(ok ? 'text-emerald-300' : 'text-rose-300');
            devWordEl.classList.remove('hidden');
        }

        
        function renderDevTestResult(raw) {
            if (!devTestResultEl) return;
            const r = (raw || '').trim();
            if (!r) {
                devTestResultEl.textContent = '';
                devTestResultEl.classList.remove('text-emerald-300','text-rose-300','text-slate-300');
                devTestResultEl.classList.add('text-slate-300');
                return;
            }
            const norm = r.toLocaleLowerCase('tr-TR');
            const direct = WORD_SET.has(norm);
            const d = direct ? null : acceptsDerivedWord(norm);
            const ok = direct || (d && d.ok);

            let msg = `"${r.toLocaleUpperCase('tr-TR')}" ` + (
                direct ? 'âœ“ listede' :
                (ok ? (`âœ“ tÃ¼retim (${(d && d.base) ? d.base : '?'}+${(d && d.suffix) ? d.suffix : '?'})`) : 'âœ— listede yok')
            );

            // Extra hint for common confusion in dev mode
            if (!direct && !ok && d && d.reason) {
                msg += ` â€¢ ${d.reason}`;
            }

            devTestResultEl.textContent = msg;
            devTestResultEl.classList.remove('text-emerald-300','text-rose-300','text-slate-300');
            devTestResultEl.classList.add(ok ? 'text-emerald-300' : 'text-rose-300');
        }

        // Dev test input: press Enter to validate without affecting gameplay.
        if (devTestInputEl) {
            devTestInputEl.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    e.stopPropagation();
                    renderDevTestResult(devTestInputEl.value);
                } else if (e.key === 'Escape') {
                    devTestInputEl.value = '';
                    renderDevTestResult('');
                }
            });
            devTestInputEl.addEventListener('input', () => {
                // Live preview while typing (only when dev is open)
                if (devAccept) renderDevTestResult(devTestInputEl.value);
            });
        }

        function updateJokerUI() {
      // Visual cue: when joker >= 1 in Classic mode, give letters a subtle green glow.
      document.body.classList.toggle("has-joker", (jokerCount || 0) > 0);

      const jokerBar = document.getElementById("joker-bar");
      const jokerCountEl = document.getElementById("joker-count");
      // Some builds may not render the joker bar; in that case, keep only the visual cue.
      if (!jokerBar || !jokerCountEl) return;

      // Easy mode has no joker mechanic.
      if (gameMode === "easy") {
        jokerBar.classList.add("hidden");
        jokerCountEl.textContent = "0";
        return;
      }

      jokerCountEl.textContent = String(jokerCount);
      if (jokerCount > 0) jokerBar.classList.remove("hidden");
      else jokerBar.classList.add("hidden");
    }

function updateDevEasyWord() {
            const el = document.getElementById('devEasyWord');
            if (!el) return;

            // DEV reveal only when DEV MODE is enabled and we are in EASY mode
            if (!devAccept || gameMode !== 'easy') {
                el.textContent = '';
                return;
            }

            const w = (easyTargetWord || '').toLocaleUpperCase('tr-TR');
            el.textContent = w ? ('DEV (Kolay hedef): ' + w) : 'DEV (Kolay hedef): (seÃ§iliyor)';
        }


        function updatePassButtonUI() {
            if (!passBtn) return;

            if (freeSpins > 0) {
                
                passBtn.classList.add('btn-pass-free');
                passBtn.classList.remove('btn-pass');
                if (passBadgeEl) {
                    passBadgeEl.textContent = `FREE x${freeSpins}`;
                }
            } else {
                
                passBtn.classList.add('btn-pass');
                passBtn.classList.remove('btn-pass-free');
                if (passBadgeEl) {
                    passBadgeEl.textContent = '-30 PUAN';
                }
            }
        }

        function pass() {
            if(!gameActive || isSpinning) return;

            if (freeSpins > 0) {
                freeSpins -= 1;
                updatePassButtonUI();
                showFeedback("PAS HAKKI!", "text-emerald-300");
                spin();
                return;
            }

            score = score - 30;
            scoreEl.textContent = score;
            showFeedback("TEKRAR Ã‡EVÄ°RÄ°LDÄ° (-30)", "text-rose-400");
            spin();
        }

        inputEl.addEventListener('input', (e) => {
            
            setInputValue(e.target.value || '', { preserveSelection: false });
        });

        
        function handleSubmitAction() {
            const raw = (inputEl.value || '').trim();
            if (raw.toLocaleLowerCase('tr-TR') === 'kremam') {
                devAccept = !devAccept;
                updateDevUI();
                inputEl.value = '';
            pendingJokerLetter = null;
                potentialEl.textContent = '0';
                // clear inline/message to avoid clutter
                showFeedback('', 'text-slate-400', 'both');
                showTinyBanner(devAccept ? 'DEV MODE AÃ‡IK' : 'DEV MODE KAPALI', devAccept ? 'text-rose-300' : 'text-slate-300');
                return;
            }
            submitWord();
        }

        inputEl.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSubmitAction();
            }
        });

        
        const mobileSubmitBtn = document.getElementById('mobile-submit');
        const mobileClearBtn = document.getElementById('mobile-clear');

        function isCoarsePointer() {
            return window.matchMedia && window.matchMedia('(hover: none) and (pointer: coarse)').matches;
        }

        // Mobile: allow submit/clear without opening the keyboard
        if (mobileSubmitBtn) {
            mobileSubmitBtn.addEventListener('click', () => { handleSubmitAction(); try{ inputEl.blur(); }catch(e){} });
        }
        if (mobileClearBtn) {
            mobileClearBtn.addEventListener('click', () => { clearInput(); try{ inputEl.blur(); }catch(e){} });
        }


        // Optional: on touch devices, don't auto-focus the input (avoids keyboard popping)
        if (isCoarsePointer() && inputEl) {
            }

let gameMode = 'classic';
            updateDevEasyWord();
        let easyTargetWord = ""; // dev-only reveal for easy mode

        if (easyBtn) easyBtn.addEventListener('click', () => { gameMode = 'easy';
            updateDevEasyWord(); startGame(); });
        if (classicBtn) classicBtn.addEventListener('click', () => { gameMode = 'classic';
            updateDevEasyWord(); startGame(); });
passBtn.addEventListener('click', pass);
        
        // Tap active reel letters to add them (mobile-friendly)
        
// Tap/click reel letters to add them (mobile-friendly).
// Use ONLY pointerdown as the primary input (covers mouse + touch in modern browsers).
// Add a small dedupe guard to prevent double-insertion on some browsers/devtools states.
let __lastReelTap = { t: 0, id: null, target: null, ch: null };
document.addEventListener('pointerdown', (e) => {
    if (window.__rulesOpen) return;
    const sym = e.target && e.target.closest ? e.target.closest('.symbol') : null;
    if (!sym) return;
    if (!gameActive || isSpinning) return;

    // Only allow taps on visible reel symbols
    if (!sym.closest || !sym.closest('.reel-container')) return;

    // Dedupe: if the same pointer/target triggers again immediately, ignore.
    const now = (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();
    const ch = (sym.textContent || '').trim();
    if (!ch) return;

    const samePointer = (__lastReelTap.id !== null && e.pointerId === __lastReelTap.id);
    const sameTarget = (sym === __lastReelTap.target);
    const sameChar = (ch === __lastReelTap.ch);
    if (sameTarget && sameChar && (now - __lastReelTap.t) < 220) {
        e.preventDefault();
        try { e.stopImmediatePropagation(); } catch (_) {}
        try { e.stopPropagation(); } catch (_) {}
        return;
    }

    __lastReelTap = { t: now, id: e.pointerId, target: sym, ch };

    // Prevent accidental scroll/selection; also blocks synthetic follow-up clicks in many cases
    e.preventDefault();
    try { e.stopImmediatePropagation(); } catch (_) {}
    try { e.stopPropagation(); } catch (_) {}

    appendLetter(ch, sym);
}, { passive: false });


        
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                
                if (gameActive) {
                    e.preventDefault();
                    pass();
                }
            }
        });


        const THEME_STORAGE_KEY = "dizgi_theme_preference";
        const themeToggle = document.getElementById('theme-toggle');
        const themeMeta = document.querySelector('meta[name="theme-color"]');
        const themeMedia = window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)') : null;

        function getSystemTheme() {
            return themeMedia && themeMedia.matches ? 'dark' : 'light';
        }

        function setTheme(theme, persist = false) {
            const nextTheme = theme === 'light' ? 'light' : 'dark';
            document.body.dataset.theme = nextTheme;
            if (themeToggle) {
                themeToggle.textContent = nextTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            }
            if (themeMeta) {
                themeMeta.setAttribute('content', nextTheme === 'dark' ? '#0b0b0f' : '#f6f3ed');
            }
            if (persist) {
                try { localStorage.setItem(THEME_STORAGE_KEY, nextTheme); } catch (_) {}
            }
        }

        function initTheme() {
            let storedTheme = null;
            try { storedTheme = localStorage.getItem(THEME_STORAGE_KEY); } catch (_) {}
            if (storedTheme) {
                setTheme(storedTheme);
            } else {
                setTheme(getSystemTheme());
            }
        }

        initTheme();

        if (themeMedia) {
            themeMedia.addEventListener('change', () => {
                let storedTheme = null;
                try { storedTheme = localStorage.getItem(THEME_STORAGE_KEY); } catch (_) {}
                if (!storedTheme) {
                    setTheme(getSystemTheme());
                }
            });
        }

        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.body.dataset.theme || getSystemTheme();
                const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
                setTheme(nextTheme, true);
            });
        }


        
        const rulesBtn = document.getElementById('rules-btn');
        const rulesPanel = document.getElementById('rules-panel');
        const rulesCloseBtn = document.getElementById('rules-close-btn');

        function closeRulesPanel() {
            if (!rulesPanel) return;
            rulesPanel.classList.add('hidden');
            // restore scroll (safe even if not modified)
            try { document.body.style.overflow = ''; } catch (_) {}
            try { window.__rulesOpen = false; } catch (_) {}

        }

        function openRulesPanel() {
            if (!rulesPanel) return;
            rulesPanel.classList.remove('hidden');
            // prevent background scroll on mobile
            try { document.body.style.overflow = 'hidden'; } catch (_) {}
            try { window.__rulesOpen = true; } catch (_) {}

        }

        // Hard guarantee: never auto-open on load / replay / game end
        closeRulesPanel();

        if (rulesBtn && rulesPanel) {
            rulesBtn.addEventListener('click', () => {
                if (rulesPanel.classList.contains('hidden')) openRulesPanel();
                else closeRulesPanel();
            });
        }
        if (rulesCloseBtn && rulesPanel) {
            rulesCloseBtn.addEventListener('click', () => closeRulesPanel());
        }
        if (rulesPanel) {
            // click outside the card closes (backdrop)
            rulesPanel.addEventListener('click', (e) => {
                if (e.target === rulesPanel) closeRulesPanel();
            });
        }
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeRulesPanel();
        });

        
        /* (cleanup) removed duplicate share block */
</script>
  <div id="releaseNotesModal" class="rn-backdrop" aria-hidden="true">
    <div class="rn-card" role="dialog" aria-modal="true" aria-labelledby="rnTitle">
      <div class="rn-head">
        <div id="rnTitle" class="rn-title">DÄ°ZGÄ° v1.04 â€“ GÃ¼ncelleme NotlarÄ±</div>
        <button id="rnCloseBtn" class="rn-close" type="button" aria-label="Kapat">Ã—</button>
      </div>
      
        <div class="rn-body">
<div style="margin-bottom:10px;">
  <b>DÄ°ZGÄ°</b>, tek kiÅŸi tarafÄ±ndan geliÅŸtirilen, reklamsÄ±z ve tamamen Ã¼cretsiz bir kelime oyunudur.<br>
  EÄŸer oyun sana keyif verdiyse, barÄ±ndÄ±rma ve geliÅŸtirme masraflarÄ±na katkÄ± vermek iÃ§in bir kahve Ä±smarlayabilirsin:<br>
  <a href="https://buymeacoffee.com/dizgioyunu" data-bmc="1" data-bmc-placement="release_notes" target="_blank" rel="noopener noreferrer" style="text-decoration:underline; color:#D6C89A;">buymeacoffee.com/dizgioyunu</a>
</div>

<div style="margin-top:6px; font-weight:700;">Bu sÃ¼rÃ¼mle gelenler:</div>
<div>â€¢ SÃ¼re mekanizmasÄ± tamamen dÃ¼zeltildi ve yenilendi.</div>
<div>â€¢ Kelime listesi geniÅŸletildi: Yeni kelimeler eklendi, sÃ¶zlÃ¼k gÃ¼ncellendi.</div>
<div>â€¢ YapÄ±m eki kontrolÃ¼ iyileÅŸtirildi: YapÄ±m ekleriyle tÃ¼retilmiÅŸ bazÄ± kelimelerin yanlÄ±ÅŸ kabul edilmesi sorunu bÃ¼yÃ¼k Ã¶lÃ§Ã¼de giderildi.</div>
<div>â€¢ Ã‡eÅŸitli kÃ¼Ã§Ã¼k hatalar dÃ¼zeltildi ve genel kararlÄ±lÄ±k artÄ±rÄ±ldÄ±.</div>

<div style="margin-top:10px;">
  <b>Not:</b><br>
  DÄ°ZGÄ° hÃ¢lÃ¢ aktif geliÅŸtirme aÅŸamasÄ±ndadÄ±r. BazÄ± kelimeler geÃ§ici olarak listede yer almayabilir.
</div>

<div style="margin-top:10px;">
  <b>Geri bildirim ve Ã¶nerileriniz iÃ§in:</b><br>
  <a href="mailto:dizgioyunu@gmail.com" style="text-decoration:underline; color:#D6C89A;">dizgioyunu@gmail.com</a>
</div>
</div>
        <div class="rn-foot">
          <button id="rnOkBtn" class="rn-ok" type="button">Tamam</button>
        </div>
    </div>
  </div>


  <div id="funFactModal" class="ff-overlay" aria-hidden="true">
    <div class="ff-wrap" role="dialog" aria-modal="true" aria-label="DÄ°ZGÄ°< notu">
      <div id="ffText" class="ff-text"></div>
      <div class="ff-hint" aria-hidden="true">oyuna baÅŸla</div>
    </div>
  </div>
<script>
  // Release Notes (one-time per version)
  (function () {
    const CURRENT_VERSION = (window.DIZGI_VERSION || window.CURRENT_VERSION || "1.04");
    const VERSION_POPUP_STORAGE_KEY = (window.DIZGI_SEEN_VERSION_KEY || window.VERSION_POPUP_STORAGE_KEY || "dizgi_seen_version");

    function showReleaseNotes() {
      const modal = document.getElementById("releaseNotesModal");
      if (!modal) return;
      modal.setAttribute("aria-hidden", "false");
      // mark global so other overlays don't stack
      window.__DIZGI_OVERLAY_OPEN__ = true;
    }

    function hideReleaseNotes() {
      const modal = document.getElementById("releaseNotesModal");
      if (!modal) return;
      modal.setAttribute("aria-hidden", "true");
      window.__DIZGI_OVERLAY_OPEN__ = false;
    }

    function markSeen() {
      try { localStorage.setItem(VERSION_POPUP_STORAGE_KEY, CURRENT_VERSION); } catch (_) {}
    }

    document.addEventListener("DOMContentLoaded", () => {
      const okBtn = document.getElementById("rnOkBtn");
      const closeBtn = document.getElementById("rnCloseBtn");
      const modal = document.getElementById("releaseNotesModal");

      function closeAndRemember() {
        markSeen();
        hideReleaseNotes();
      }

      if (okBtn) okBtn.addEventListener("click", closeAndRemember);
      if (closeBtn) closeBtn.addEventListener("click", closeAndRemember);

      if (modal) {
        modal.addEventListener("click", (e) => {
          if (e.target === modal) closeAndRemember();
        });
      }

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          const m = document.getElementById("releaseNotesModal");
          if (m && m.getAttribute("aria-hidden") === "false") closeAndRemember();
        }
      });

      let seen = null;
      try { seen = localStorage.getItem(VERSION_POPUP_STORAGE_KEY); } catch (_) {}
      if (seen !== CURRENT_VERSION) {
        showReleaseNotes();
      }
    });
  })();
</script>
<script>
  // Fun Fact / Tip / Ã–zlÃ¼ sÃ¶z (â‰ˆ20% chance on load) â€” legacy full-screen style
  (function () {
    const QUOTES_TR = [
      "DÄ°ZGÄ°<",
      "Ä°pucu: Uzun kelime, daha fazla sÃ¼re.",
      "Ä°pucu: KÄ±sa kelime bazen en hÄ±zlÄ± yoldur.",
      "Ä°pucu: AynÄ± harf her zaman engel deÄŸildir.",
      "Ä°pucu: Ã–nce kolay kelimeyi al, sonra bÃ¼yÃ¼t.",
      "Ä°pucu: ZamanÄ± uzatmak iÃ§in kelimeyi uzat.",
      "Ä°pucu: Tek hamlelik kelime, iyi baÅŸlangÄ±Ã§tÄ±r.",
      "Ä°pucu: SeÃ§tiÄŸin kelime kadar, seÃ§mediklerin de Ã¶nemlidir.",
      "Ä°pucu: Bir harfi boÅŸa harcamak, bir saniyeyi boÅŸa harcamaktÄ±r.",
      "Ä°pucu: Bazen en iyi hamle, sade olandÄ±r.",
      "Ä°pucu: AynÄ± harften iki tane varsa, plan yap.",
      "Ä°pucu: Kelimeyi bÃ¼yÃ¼tÃ¼rken ritmi bozma.",
      "Ä°pucu: YanlÄ±ÅŸ yola girersen temizlemekten Ã§ekinme.",
      "EÄŸlenceli bilgi: DÄ°ZGÄ°< kod bilmeden geliÅŸtirildi.",
      "EÄŸlenceli bilgi: DÄ°ZGÄ°< 40.000+ sÃ¶zcÃ¼kle oynuyor.",
      "EÄŸlenceli bilgi: Bu oyunda kelimeler â€œpuanâ€dan Ã¶nce gelir.",
      "EÄŸlenceli bilgi: Burada hÄ±z kadar sezgi de kazanÄ±r.",
      "Her kelime bir seÃ§imdir.",
      "Anlam bazen kÄ±sa yoldan gider.",
      "Kelime, sessiz bir mekanizmadÄ±r.",
      "Zihin, harflerle dÃ¼ÅŸÃ¼nÃ¼r.",
      "Bir kelime kurarsÄ±n; bir ÅŸey kurulur.",
      "Dikkat, oyunun gerÃ§ek sÃ¼residir.",
      "Harfler yer deÄŸiÅŸtirir; sen de.",
      "Fazla dÃ¼ÅŸÃ¼nmek de bir hamledir.",
      "KÃ¼Ã§Ã¼k bir kelime, bÃ¼yÃ¼k bir kapÄ± aÃ§ar.",
      "â€œDÃ¼nyadaki bÃ¼tÃ¼n umut, hiÃ§ hesaba katÄ±lmayan insanlardadÄ±r.â€\n(Ursula K. Le Guin)",
      "â€œYaktÄ±ÄŸÄ±n her mum, verir bir gÃ¶lgeye doÄŸum.â€\n(Ursula K. Le Guin)",
      "â€œHer ÅŸeyi anlamak, her ÅŸeyi affetmektir.â€\n(Evelyn Waugh)",
      "â€œÄ°nsan isimleri unuttuÄŸu gibi kelimeleri de unutur.\nKiÅŸinin kelime daÄŸarcÄ±ÄŸÄ± sÃ¼rekli gÃ¼brelenmeye ihtiyaÃ§ duyar,\nyoksa Ã¶lÃ¼r.â€\n(Evelyn Waugh)"
    ];

    function showFunFact() {
      const modal = document.getElementById("funFactModal");
      const textEl = document.getElementById("ffText");
      if (!modal || !textEl) return;

      const pick = QUOTES_TR[Math.floor(Math.random() * QUOTES_TR.length)];
      textEl.textContent = pick;

      modal.setAttribute("aria-hidden", "false");
      window.__DIZGI_OVERLAY_OPEN__ = true;
    }

    function hideFunFact() {
      const modal = document.getElementById("funFactModal");
      if (!modal) return;
      modal.setAttribute("aria-hidden", "true");
      window.__DIZGI_OVERLAY_OPEN__ = false;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById("funFactModal");

      function close() { hideFunFact(); }

      // Close on click anywhere
      if (modal) modal.addEventListener("click", close);

      // Close on any key
      document.addEventListener("keydown", () => {
        const m = document.getElementById("funFactModal");
        if (m && m.getAttribute("aria-hidden") === "false") close();
      });

      // Give other overlays (release notes) a beat to claim the screen.
      setTimeout(() => {
        // If another overlay is open, do nothing this load.
        if (window.__DIZGI_OVERLAY_OPEN__) return;

        // Each page load: 20% chance.
        if (Math.random() < 0.20) showFunFact();
      }, 150);
    });
  })();
</script>
<!-- (cleanup) removed legacy rules/leaderboard script + overlay HTML -->
<!-- leaderboard overlay -->
<div id="leaderboard-overlay" class="hidden fixed inset-0 z-[950] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4">
  <div class="leaderboard-card w-full max-w-md max-h-[80vh] rounded-2xl border shadow-2xl overflow-hidden flex flex-col">
    <div class="leaderboard-header px-5 py-4 border-b flex items-center justify-between">
      <div id="leaderboard-title" class="font-extrabold tracking-widest">ZÄ°RVEDEKÄ°LER</div>
      <button id="leaderboard-close" class="px-3 py-1 rounded-lg border">
        Kapat
      </button>
    </div>

    <div class="px-5 pt-4 pb-0">
      <div id="leaderboard-tabs" class="inline-flex rounded-xl border p-1 gap-1">
        <button id="leaderboard-tab-classic" class="leaderboard-tab">
          Klasik
        </button>
        <button id="leaderboard-tab-easy" class="leaderboard-tab">
          Kolay
        </button>
      </div>
    </div>

    <div class="p-5 flex-1 overflow-hidden flex flex-col">
      <div id="leaderboard-loading" class="text-sm">YÃ¼kleniyorâ€¦</div>

      <!-- Classic -->
      <ol id="leaderboard-list-classic" class="hidden mt-3 space-y-2 flex-1 overflow-y-auto pr-1 max-h-[420px]"></ol>

      <!-- Easy -->
      <ol id="leaderboard-list-easy" class="hidden mt-3 space-y-2 flex-1 overflow-y-auto pr-1 max-h-[420px]"></ol>

      <div id="leaderboard-empty" class="hidden text-sm">HenÃ¼z skor yok.</div>
    </div>
  </div>
</div>

<script>
(function(){
  function q(id){ return document.getElementById(id); }

  var activeMode = 'classic'; // classic | easy
  var activeRange = 'all';    // future: all | last24h
  var LIMIT = 25;

  var cache = {
    classic: { rows: null, ts: 0 },
    easy:    { rows: null, ts: 0 }
  };

  function buildLeaderboardUrl(opts){
    var mode = (opts && opts.mode) ? opts.mode : activeMode;
    var range = (opts && opts.range) ? opts.range : activeRange;
    var limit = (opts && opts.limit) ? opts.limit : LIMIT;

    var params = [];
    params.push('mode=' + encodeURIComponent(mode));
    params.push('limit=' + encodeURIComponent(String(limit)));

    // future-proof: range support (UI not exposed yet)
    if (range && range !== 'all') params.push('range=' + encodeURIComponent(range));

    // cache bust
    params.push('_=' + Date.now());

    return '/.netlify/functions/leaderboard?' + params.join('&');
  }

  function escapeHtml(s){
    return String(s ?? '').replace(/[&<>"']/g, function(c){
      return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]);
    });
  }

  function applyTabStyles(){
    var tabClassic = q('leaderboard-tab-classic');
    var tabEasy = q('leaderboard-tab-easy');

    if(!tabClassic || !tabEasy) return;

    if(activeMode === 'classic'){
      tabClassic.className = "leaderboard-tab leaderboard-tab-active";
      tabEasy.className    = "leaderboard-tab";
    } else {
      tabEasy.className    = "leaderboard-tab leaderboard-tab-active";
      tabClassic.className = "leaderboard-tab";
    }
  }

  function setVisibleList(){
    var listClassic = q('leaderboard-list-classic');
    var listEasy = q('leaderboard-list-easy');
    var emptyEl = q('leaderboard-empty');

    if(listClassic) listClassic.classList.add('hidden');
    if(listEasy) listEasy.classList.add('hidden');
    if(emptyEl) emptyEl.classList.add('hidden');

    if(activeMode === 'classic'){
      if(listClassic) listClassic.classList.remove('hidden');
    } else {
      if(listEasy) listEasy.classList.remove('hidden');
    }
  }

  function renderRows(mode, rows){
    var listEl = (mode === 'easy') ? q('leaderboard-list-easy') : q('leaderboard-list-classic');
    if(!listEl) return;

    if(!Array.isArray(rows) || rows.length === 0){
      listEl.innerHTML = '';
      return;
    }

    listEl.innerHTML = rows.map(function(r, i){
      var name = (r && (r.name ?? r.playerName) ? (r.name ?? r.playerName) : 'Anonim').toString();
      var score = Number(r && r.score ? r.score : 0) || 0;
      return (
        '<li class="leaderboard-row flex items-center justify-between gap-3 px-3 py-2 rounded-xl">' +
          '<div class="min-w-0">' +
            '<span class="leaderboard-rank">' + (i+1) + '.</span>' +
            '<span class="leaderboard-name truncate ml-2">' + escapeHtml(name) + '</span>' +
          '</div>' +
          '<div class="leaderboard-score tabular-nums">' + score + '</div>' +
        '</li>'
      );
    }).join('');
  }

  async function loadAndRender(mode, force){
    var loadingEl = q('leaderboard-loading');
    var emptyEl = q('leaderboard-empty');

    var listClassic = q('leaderboard-list-classic');
    var listEasy = q('leaderboard-list-easy');
    if(!listClassic || !listEasy) return;

    var targetList = (mode === 'easy') ? listEasy : listClassic;

    // show loading state
    if(loadingEl) loadingEl.classList.remove('hidden');
    if(emptyEl) emptyEl.classList.add('hidden');

    // hide both lists while loading (prevents flicker)
    listClassic.classList.add('hidden');
    listEasy.classList.add('hidden');
    targetList.innerHTML = '';

    // cache: keep it simple (fresh for 20s unless force)
    var now = Date.now();
    var entry = cache[mode];
    var isFresh = entry && entry.rows && (now - entry.ts < 20000);

    if(!force && isFresh){
      if(loadingEl) loadingEl.classList.add('hidden');
      setVisibleList();
      renderRows(mode, entry.rows);
      return;
    }

    try{
      var url = buildLeaderboardUrl({ mode: mode, range: activeRange, limit: LIMIT });
      var res = await fetch(url, { cache:'no-store', headers:{ 'Accept':'application/json' }});
      var data = await res.json();

      var rows = Array.isArray(data && data.rows) ? data.rows
               : Array.isArray(data && data.leaderboard) ? data.leaderboard
               : [];

      cache[mode] = { rows: rows, ts: Date.now() };

      if(loadingEl) loadingEl.classList.add('hidden');

      if(!rows || rows.length === 0){
        if(emptyEl){
          // keep color aligned with classic header; no extra explanation
          emptyEl.textContent = 'HenÃ¼z skor yok.';
          emptyEl.classList.remove('hidden');
        }
        // still show the active list container (empty)
        setVisibleList();
        return;
      }

      setVisibleList();
      renderRows(mode, rows);

    } catch(err){
      console.error('[zirvedekiler] load failed:', err);
      if(loadingEl) loadingEl.classList.add('hidden');
      if(emptyEl){
        emptyEl.textContent = 'Skorlar yÃ¼klenemedi.';
        emptyEl.classList.remove('hidden');
      }
      setVisibleList();
    }
  }

  function openLeaderboard(){
    var overlay = q('leaderboard-overlay');
    if(!overlay) return;
    overlay.classList.remove('hidden');

    applyTabStyles();
    setVisibleList();
    loadAndRender(activeMode, true);

    try { window.__lbOpen = true; } catch (_) {}
  }

  function closeLeaderboard(){
    var overlay = q('leaderboard-overlay');
    if(!overlay) return;
    overlay.classList.add('hidden');
    try { window.__lbOpen = false; } catch (_) {}
  }

  function switchMode(mode){
    if(mode !== 'classic' && mode !== 'easy') return;
    if(activeMode === mode){
      // refresh on re-tap not needed; keep silent
      return;
    }
    activeMode = mode;
    applyTabStyles();
    setVisibleList();
    loadAndRender(activeMode, false);
  }

  document.addEventListener('DOMContentLoaded', function(){
    var btn = q('leaderboard-btn');
    var closeBtn = q('leaderboard-close');
    var overlay = q('leaderboard-overlay');

    var tabClassic = q('leaderboard-tab-classic');
    var tabEasy = q('leaderboard-tab-easy');

    if(btn){
      btn.addEventListener('click', function(e){ e.preventDefault(); openLeaderboard(); });
    }
    if(closeBtn){
      closeBtn.addEventListener('click', function(e){ e.preventDefault(); closeLeaderboard(); });
    }
    if(overlay){
      overlay.addEventListener('click', function(e){
        if(e.target === overlay) closeLeaderboard();
      });
      document.addEventListener('keydown', function(e){
        if(e.key === 'Escape' && !overlay.classList.contains('hidden')) closeLeaderboard();
      });
    }

    if(tabClassic){
      tabClassic.addEventListener('click', function(e){ e.preventDefault(); switchMode('classic'); });
    }
    if(tabEasy){
      tabEasy.addEventListener('click', function(e){ e.preventDefault(); switchMode('easy'); });
    }
  });
})();
</script>

<!-- (cleanup) removed legacy ZIRVEDEKILER PATCH v8 script -->

<!-- /ZIRVEDEKILER PATCH v8 -->

<!-- release: v7 stable -->
<!-- preview-trigger: 2026-01-31 -->



<script>
(function(){
  function safeGtag(){ return typeof window.gtag === "function"; }
  document.addEventListener("click", function(e){
    var a = e.target.closest && e.target.closest('a[data-bmc="1"]');
    if (!a) return;
    var placement = a.getAttribute("data-bmc-placement") || "unknown";
    if (safeGtag()) {
      window.gtag("event", "bmc_click", {
        placement: placement,
        link_url: a.href
      });
    }
  }, { capture: true });
})();
</script>

</body></html>
